<!-- URL 导入模态框 -->
<div x-data="importModal" x-show="showImportUrlModal" x-cloak class="modal-overlay z-max-modal">
    <div style="background: var(--bg-panel); padding: 1.5rem; border-radius: 0.75rem; width: 30rem; border: 1px solid var(--border-light); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);"
        @click.away="showImportUrlModal=false">
        <h3 style="font-weight: bold; color: var(--text-main); margin-bottom: 1rem;">从 URL 导入角色卡</h3>
        <div style="display: flex; flex-direction: column; gap: 1rem;">
            <div>
                <label class="form-label">图片链接</label>
                <input type="text" x-model="importUrlInput" class="form-input" placeholder="https://..."
                    @keydown.enter="importFromUrl()">
                <div class="text-xs mt-1" style="color: var(--text-dim);">支持 PNG 直链。</div>
            </div>
            <div>
                <label class="form-label">保存位置</label>
                <select x-model="importTargetCategory" class="form-input">
                    <option value="">(当前浏览目录)</option>
                    <option value="根目录">根目录</option>
                    <template x-for="folder in allFoldersList" :key="folder.path">
                        <option :value="folder.path" x-text="folder.path"></option>
                    </template>
                </select>
            </div>
            <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
                <button @click="showImportUrlModal=false" class="btn-secondary" style="flex:1;">取消</button>
                <button @click="importFromUrl()" :disabled="isLoading" class="btn-primary"
                    style="flex:1; border-radius: 0.5rem;">
                    <span x-show="!isLoading">📥 立即导入</span>
                    <span x-show="isLoading">下载中...</span>
                </button>
            </div>
        </div>
    </div>
</div>