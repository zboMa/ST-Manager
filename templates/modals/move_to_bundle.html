<!-- 移动到包弹窗 -->
<div x-data="moveToBundleModal" x-show="showMoveToBundleModal" x-cloak class="modal-overlay z-modal-popover"
    @click.self="showMoveToBundleModal = false">
    <div style="background: var(--bg-panel); padding: 0; border-radius: 1rem; width: 90vw; max-width: 400px; border: 1px solid var(--border-light); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5); overflow: hidden; display: flex; flex-direction: column;">
        <!-- Header -->
        <div style="padding: 1rem 1.25rem; background: var(--bg-sub); border-bottom: 1px solid var(--border-light);">
            <h3 style="font-weight: bold; color: var(--text-main); font-size: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                📦 移动到包
            </h3>
        </div>
        
        <div style="padding: 1.25rem;">
            <div style="display: flex; flex-direction: column; gap: 1rem;">
                <div>
                    <label style="font-weight: 500; margin-bottom: 0.5rem; display: block; font-size: 0.875rem; color: var(--text-main);">选择目标包</label>
                    <div class="relative">
                        <select x-model="targetBundleDir" class="form-input" style="width: 100%; padding-left: 2.5rem; font-size: 0.875rem;">
                            <option value="">-- 请选择包 --</option>
                            <template x-for="bundle in availableBundles" :key="bundle.bundle_dir">
                                <option :value="bundle.bundle_dir" x-text="'📦 ' + bundle.bundle_dir"></option>
                            </template>
                        </select>
                        <div style="position: absolute; left: 0.75rem; top: 50%; transform: translateY(-50%); color: var(--text-dim); pointer-events: none;">📦</div>
                    </div>
                    <div style="font-size: 0.75rem; color: var(--text-dim); margin-top: 0.5rem;">
                        将移动卡片到选中的包中
                    </div>
                    <div x-show="availableBundles.length === 0" style="font-size: 0.75rem; color: var(--text-dim); margin-top: 0.5rem; font-style: italic;">
                        当前没有可用的包
                    </div>
                </div>

                <div style="display: flex; gap: 0.75rem; margin-top: 0.5rem;">
                    <button @click="showMoveToBundleModal = false" class="btn-secondary" style="flex:1; justify-content: center; font-size: 0.875rem; padding: 0.5rem;">
                        取消
                    </button>
                    <button @click="executeMove()" :disabled="!targetBundleDir" class="btn-primary" style="flex:2; justify-content: center; font-size: 0.875rem; padding: 0.5rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);" :class="!targetBundleDir ? 'opacity-50 cursor-not-allowed' : ''">
                        📦 移动
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
