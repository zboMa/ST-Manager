<!-- ËØ¶ÊÉÖÈ°µÊ®°ÊÄÅÊ°Ü (Refactored) -->
<div x-show="showDetail" x-data="detailModal" x-cloak class="modal-overlay z-modal-std" @click.self="showDetail=false">

    <div class="detail-modal" @click.stop>
        <!-- Â∑¶‰æßÂ§ñÊÇ¨ÊµÆÔºöSKINSÔºà‰∏çÈÅÆÊå°ÂõæÁâáÔºâ -->
        <div class="detail-filmstrip-outside custom-scrollbar"
            x-show="showDetail && !isCardFlipped && skinImages.length > 0"
            x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 -translate-x-4"
            x-transition:enter-end="opacity-100 translate-x-0">
            <div class="detail-filmstrip-title">SKINS</div>

            <!-- ‰∏ªÂõæ -->
            <button type="button" @click="currentSkinIndex=-1" class="detail-thumb"
                :class="currentSkinIndex === -1 ? 'active-main' : ''">
                <img :src="activeCard.image_url" alt="Main">
                <span class="detail-thumb-label">Main</span>
            </button>

            <!-- ÁöÆËÇ§ÂàóË°® -->
            <template x-for="(skin, idx) in skinImages" :key="skin">
                <button type="button" @click="currentSkinIndex=idx" class="detail-thumb"
                    :class="currentSkinIndex === idx ? 'active-skin' : ''" :title="skin">
                    <!-- ‰ΩøÁî® getSkinUrl ÂáΩÊï∞ÔºåÂπ∂Ê∑ªÂä† x-show Á°Æ‰øù URL ÊúâÊïàÊâçÊ∏≤Êüì -->
                    <img :src="getSkinUrl(skin)" x-show="getSkinUrl(skin)" loading="lazy" alt="Skin"
                        onerror="this.style.display='none'">
                    <span class="detail-thumb-label" x-text="skin.length > 10 ? '...'+skin.slice(-8) : skin"></span>
                </button>
            </template>
        </div>

        <div class="detail-modal-inner">
            <!-- Â∑¶‰æßÔºöÂõæÁâá / ÂÖÉÊï∞ÊçÆ / Áº©Êîæ / ÁâàÊú¨Êù° -->
            <section class="detail-left" x-data="{
                        isPanning: false,
                        startX: 0,
                        startY: 0,
                        scrollLeft: 0,
                        scrollTop: 0
                    }" @mouseleave="isPanning=false">

                <!-- ÂõæÁâáËßÜÂè£ -->
                <div class="detail-image-area">

                    <!-- ÂõæÁâáÊªöÂä®ÂÆπÂô® -->
                    <div x-show="!isCardFlipped" class="detail-image-scroll custom-scrollbar" x-ref="imgWrapper"
                        @wheel.prevent="handleWheelZoom($event)" @mousedown="isPanning = true;
                                startX = $event.pageX - $refs.imgWrapper.offsetLeft;
                                startY = $event.pageY - $refs.imgWrapper.offsetTop;
                                scrollLeft = $refs.imgWrapper.scrollLeft;
                                scrollTop = $refs.imgWrapper.scrollTop" @mousemove="if(isPanning) {
                                $refs.imgWrapper.scrollLeft = scrollLeft - ($event.pageX - $refs.imgWrapper.offsetLeft - startX);
                                $refs.imgWrapper.scrollTop = scrollTop - ($event.pageY - $refs.imgWrapper.offsetTop - startY);
                            }" @mouseup="isPanning=false" @dragstart.prevent>

                        <img :src="displayImageUrl"
                            :style="'width: ' + zoomLevel + '%; min-width: ' + zoomLevel + '%; max-width: none;'"
                            class="detail-image" draggable="false"
                            onerror="this.onerror=null; this.src='/static/images/default_card.png';" alt="Card Image">
                    </div>

                    <!-- ÂÖÉÊï∞ÊçÆÈù¢Êùø -->
                    <div x-show="isCardFlipped" class="detail-metadata">
                        <div class="detail-metadata-header">
                            <div class="flex items-center gap-2">
                                <span class="text-accent font-bold">üì¶ METADATA</span>
                                <span class="text-xs" style="color: var(--text-dim);">Âè™ËØªÈ¢ÑËßà</span>
                            </div>
                            <button @click="isCardFlipped=false" class="btn-secondary"
                                style="padding:0.25rem 0.75rem; font-size:0.75rem;">
                                ‚Ü© ËøîÂõûÂõæÁâá
                            </button>
                        </div>
                        <pre class="detail-metadata-body custom-scrollbar" x-text="rawMetadataContent"></pre>
                    </div>

                    <!-- Â∑¶‰æßÂ∑•ÂÖ∑Êù°ÔºàÊÇ¨ÊµÆÔºâ -->
                    <div class="detail-left-toolbar">
                        <button x-show="!isCardFlipped" @click.stop="flipCard()" class="btn-secondary detail-icon-btn"
                            title="Êü•ÁúãÂÖÉÊï∞ÊçÆ">
                            ‚ÑπÔ∏è
                        </button>

                        <button x-show="!isCardFlipped" @click.stop="triggerImageUpload()"
                            class="btn-secondary detail-icon-btn" title="Êõ¥Êç¢ÂõæÁâá">
                            üì∑
                        </button>

                        <!-- ÁßªÂä®Á´ØÔºöÂø´ÁÖßÊåâÈíÆÔºàÂú®ÂõæÁâáÂå∫ÂüüÂè≥‰∏äËßíÔºâ -->
                        <button x-show="$store.global.deviceType === 'mobile' && !isCardFlipped"
                            @click="createSnapshot('card')" class="btn-secondary detail-icon-btn detail-close-mobile"
                            title="Âø´ÁÖß">
                            üì∏
                        </button>
                        <!-- ÁßªÂä®Á´ØÔºö‰øùÂ≠òÊåâÈíÆÔºàÂú®ÂõæÁâáÂå∫ÂüüÂè≥‰∏äËßíÔºâ -->
                        <button x-show="$store.global.deviceType === 'mobile' && !isCardFlipped" @click="saveChanges()"
                            :disabled="isSaving" class="btn-secondary detail-icon-btn detail-close-mobile" title="‰øùÂ≠òÂç°Áâá">
                            üíæ
                        </button>
                        <!-- ÁßªÂä®Á´ØÔºöÂÖ≥Èó≠ÊåâÈíÆÔºàÂú®ÂõæÁâáÂå∫ÂüüÂè≥‰∏äËßíÔºâ -->
                        <button x-show="$store.global.deviceType === 'mobile' && !isCardFlipped"
                            @click.stop="showDetail=false" class="btn-secondary detail-icon-btn detail-close-mobile"
                            title="ÂÖ≥Èó≠">
                            ‚úï
                        </button>
                    </div>

                    <!-- ÁßªÂä®Á´ØÔºöToken ÂíåÊó∂Èó¥ÊÇ¨ÊµÆÊòæÁ§∫ÔºàÂú®ÂõæÁâáÂå∫ÂüüÂ∫ïÈÉ®Ôºâ -->
                    <div x-show="$store.global.deviceType === 'mobile' && !isCardFlipped"
                        class="detail-mobile-token-overlay">
                        <div class="detail-mobile-token-item">
                            <span class="detail-mobile-token-value text-neon"
                                :class="totalTokenCount > 20000 ? 'text-red-300' : (totalTokenCount > 5000 ? 'text-yellow-300' : 'text-green-300')"
                                x-text="'ü™ô' + totalTokenCount"></span>
                        </div>
                        <div class="detail-mobile-token-item">
                            <span class="detail-mobile-token-value text-xs font-mono"
                                x-text="formatDate(activeCard.last_modified)"></span>
                        </div>
                    </div>

                    <!-- Áº©ÊîæÊù°ÔºàÂ∫ïÈÉ®ÊÇ¨ÊµÆÔºâ -->
                    <div x-show="!isCardFlipped" class="detail-zoombar">
                        <button @click.stop="modifyZoom(-20)" class="detail-zoom-btn">‚àí</button>

                        <input type="range" min="20" max="500" step="10" x-model.number="zoomLevel"
                            class="detail-zoom-range" @click.stop>

                        <button @click.stop="modifyZoom(20)" class="detail-zoom-btn">+</button>

                        <span class="detail-zoom-text" x-text="zoomLevel + '%'"></span>

                        <button @click.stop="zoomLevel=100" class="detail-zoom-reset" title="ÈáçÁΩÆ">
                            ‚Ü∫
                        </button>
                    </div>

                </div>

                <!-- ÁâàÊú¨Êù°ÔºöBundle Ê®°Âºè -->
                <div x-show="!isCardFlipped && activeCard.is_bundle" @wheel.prevent="$el.scrollLeft += $event.deltaY"
                    class="detail-versions custom-scrollbar flex items-center px-4 overflow-x-auto bg-black/20 border-t border-white/10">

                    <div class="detail-versions-title mr-2">VERSIONS</div>

                    <template x-for="ver in activeCard.versions" :key="ver.id">
                        <div class="detail-version-thumb-btn group relative"
                            :class="editingData.id === ver.id ? 'active' : ''" @click="switchVersion(ver.id)">

                            <!-- Áº©Áï•Âõæ -->
                            <img :src="'/api/thumbnail/' + encodeURIComponent(ver.id)" class="detail-version-img"
                                loading="lazy" onerror="this.src='/static/images/default_card.png'">

                            <!-- ËÆæ‰∏∫Â∞ÅÈù¢ÊåâÈíÆ (‰ªÖÂú®ÈùûÂΩìÂâçÈ¶ñÂõæÊó∂ÊòæÁ§∫ÔºåÊàñËÄÖ‰∏ÄÁõ¥ÊòæÁ§∫‰æõË∞ÉÊï¥) -->
                            <button @click.stop="setAsBundleCover(ver.id)" class="detail-version-set-cover"
                                title="ËÆæ‰∏∫ÊúÄÊñ∞/Â∞ÅÈù¢ (Êõ¥Êñ∞Êó∂Èó¥)">
                                ‚òÖ
                            </button>

                            <!-- Êñá‰ª∂ÂêçË¶ÜÁõñÂ±Ç -->
                            <div class="detail-version-overlay" x-text="getVersionName(ver.filename)"></div>
                        </div>
                    </template>
                </div>

                <!-- ÈöêËóèÁöÑ Input -->
                <input type="file" x-ref="imageInput" @change="handleImageUpload" accept="image/*"
                    style="display:none;">
            </section>

            <!-- Âè≥‰æßÔºö‰ø°ÊÅØ + Tab -->
            <section class="detail-right">

                <!-- È°∂ÈÉ®Ê†èÔºöÊ†áÈ¢ò / token / Âø´Êç∑Êìç‰Ωú -->
                <header class="detail-topbar" x-show="$store.global.deviceType !== 'mobile'">
                    <!-- Ê°åÈù¢Á´ØÔºöÂÖ≥Èó≠ÊåâÈíÆ -->
                    <button @click="showDetail=false" class="btn-secondary detail-close-floating" title="ÂÖ≥Èó≠">‚úï</button>
                    <!-- Ê°åÈù¢Á´ØÔºöÂ∏ÆÂä©ÊåâÈíÆ (‰Ωç‰∫éÂÖ≥Èó≠ÊåâÈíÆÂ∑¶‰æß) -->
                    <button @click="showHelpModal=true" class="btn-secondary detail-help-floating"
                        title="Êü•ÁúãÂ∏ÆÂä©ÊåáÂçó">?</button>

                    <div class="detail-title-block">
                        <div class="detail-title-row">
                            <div class="detail-title-label">ËßíËâ≤ÂêçÁß∞</div>

                            <!-- ÂêçÁß∞ -->
                            <div class="detail-title-inline">
                                <input type="text" x-model="editingData.char_name" class="detail-title-input">
                            </div>
                        </div>

                        <div class="detail-subrow flex-wrap gap-x-4 gap-y-2">

                            <!-- Âàõ‰ΩúËÄÖ -->
                            <div class="flex items-center gap-2 min-w-[120px] flex-shrink-0" title="Âàõ‰ΩúËÄÖ (Creator)">
                                <span class="text-xs opacity-60">üé®</span>
                                <input type="text" x-model="editingData.creator" placeholder="Êú™Áü•Âàõ‰ΩúËÄÖ"
                                    class="bg-transparent border-b border-dashed border-[var(--border-light)] text-xs text-[var(--text-sub)] focus:border-[var(--accent-main)] focus:text-[var(--text-main)] outline-none transition-colors w-full max-w-[150px] py-0.5">
                            </div>

                            <!-- Êù•Ê∫êÈìæÊé• -->
                            <div class="flex items-center gap-2 flex-1 min-w-[180px]">
                                <span class="detail-link-icon text-xs">üîó</span>
                                <input type="text" x-model="editingData.source_link" placeholder="Êù•Ê∫êÈìæÊé• (http://...)"
                                    class="detail-link-input text-xs w-full">
                                <a x-show="editingData.source_link" :href="editingData.source_link" target="_blank"
                                    class="detail-open-link" title="ÊâìÂºÄÈìæÊé•">‚Üó</a>
                            </div>
                        </div>
                    </div>

                    <!-- Ê°åÈù¢Á´ØÔºöToken ÊòæÁ§∫ -->
                    <div class="topbar-token" title="È¢Ñ‰º∞ TokenÔºàÂê´‰∏ñÁïå‰π¶Ôºâ">
                        <span class="topbar-token-label">Tokens</span>
                        <span class="topbar-token-value text-neon"
                            :class="totalTokenCount > 20000 ? 'danger' : (totalTokenCount > 5000 ? 'warn' : 'ok')"
                            x-text="totalTokenCount"></span>
                    </div>

                    <div class="topbar-token border-r-0 pl-3 ml-2 border-l border-[var(--border-light)]" title="ÊúÄÂêé‰øÆÊîπÊó∂Èó¥">
                        <span class="topbar-token-label">Last Modified</span>
                        <span class="text-xs font-mono font-bold text-neon" style="color: var(--text-main);"
                            x-text="formatDate(activeCard.last_modified)"></span>
                    </div>

                    <div class="detail-top-actions">
                        <div class="detail-actions-row">
                            <button @click="createSnapshot('card')" @contextmenu.prevent="createKeySnapshot('card')"
                                class="btn-secondary detail-action-btn detail-snapshot-btn" title="Â∑¶ÈîÆ: Âø´ÁÖß | Âè≥ÈîÆ: ÂÖ≥ÈîÆÂø´ÁÖß">
                                <span>üì∏</span> <span class="btn-text">Âø´ÁÖß</span>
                            </button>

                            <button @click="saveChanges()" :disabled="isSaving"
                                class="btn-primary detail-action-btn detail-save-btn" title="‰øùÂ≠òÊõ¥Êîπ">
                                <span x-show="!isSaving">üíæ</span>
                                <span x-show="isSaving" class="animate-spin">‚è≥</span>

                                <span class="btn-text ml-1" x-text="isSaving ? '‰øùÂ≠ò‰∏≠...' : '‰øùÂ≠ò'"></span>
                            </button>
                        </div>
                    </div>
                </header>

                <!-- ‰∫åÁ∫ßÔºöËµÑÊ∫êÁõÆÂΩïÊù°ÔºàÊõ¥Ê∏ÖÊô∞Ôºâ -->
                <div class="detail-resourcebar" x-show="$store.global.deviceType !== 'mobile'">
                    <div class="detail-resource-left">
                        <div class="detail-resource-title">üìÅ ËµÑÊ∫êÁõÆÂΩï</div>
                        <div class="detail-resource-path">
                            <template x-if="editingData.resource_folder">
                                <span class="detail-chip" x-text="editingData.resource_folder"></span>
                            </template>
                            <template x-if="!editingData.resource_folder">
                                <span class="detail-muted">Êú™ËÆæÁΩÆËµÑÊ∫êÁõÆÂΩï</span>
                            </template>
                        </div>
                    </div>

                    <div class="detail-resource-actions">
                        <button @click="openResourceFolder()" x-show="editingData.resource_folder"
                            class="btn-secondary detail-mini-btn" title="ÊµèËßàËµÑÊ∫êÁõÆÂΩï">
                            üîç ÊµèËßà
                        </button>
                        <button @click="createResourceFolder()" x-show="!editingData.resource_folder"
                            class="btn-secondary detail-mini-btn" title="ÂàõÂª∫ËµÑÊ∫êÁõÆÂΩï">
                            ‚ú® ÂàõÂª∫
                        </button>
                        <button @click="showSetResourceFolderModal=true" class="btn-secondary detail-mini-btn"
                            title="ËÆæÁΩÆËµÑÊ∫êÁõÆÂΩï">
                            ‚öôÔ∏è ËÆæÁΩÆ
                        </button>
                    </div>
                </div>

                <!-- Tab Ê†è -->
                <nav class="detail-tabs">
                    <button x-show="$store.global.deviceType === 'mobile'" class="detail-tab"
                        :class="tab==='info' ? 'active' : ''" @click="tab='info'">
                        <span class="tab-icon">‚ÑπÔ∏è</span>
                        <span class="tab-text">‰ø°ÊÅØ</span>
                    </button>
                    <button class="detail-tab" :class="tab==='basic' ? 'active' : ''" @click="tab='basic'">
                        <span class="tab-icon">üìù</span>
                        <span class="tab-text">Âü∫Á°Ä</span>
                    </button>
                    <button x-show="hasPersonaFields" class="detail-tab" :class="tab==='persona' ? 'active' : ''"
                        @click="tab='persona'">
                        <span class="tab-icon">üß†</span>
                        <span class="tab-text">ËÆæÂÆö</span>
                    </button>
                    <button class="detail-tab" :class="tab==='dialog' ? 'active' : ''" @click="tab='dialog'">
                        <span class="tab-icon">üí¨</span>
                        <span class="tab-text">ÂØπËØù</span>
                    </button>
                    <button class="detail-tab" :class="tab==='tags' ? 'active' : ''" @click="tab='tags'">
                        <span class="tab-icon">üè∑Ô∏è</span>
                        <span class="tab-text">Ê†áÁ≠æ</span>
                    </button>
                    <button class="detail-tab" :class="tab==='wi' ? 'active' : ''" @click="tab='wi'">
                        <span class="tab-icon">üåé</span>
                        <span class="tab-text">‰∏ñÁïå‰π¶</span>
                    </button>
                    <button class="detail-tab" :class="tab==='manage' ? 'active' : ''" @click="tab='manage'">
                        <span class="tab-icon">üß∞</span>
                        <span class="tab-text">ÁÆ°ÁêÜ</span>
                    </button>
                    <button class="detail-tab" :class="tab==='resources' ? 'active' : ''" @click="tab='resources'">
                        <span class="tab-icon">üì¶</span>
                        <span class="tab-text">ËµÑÊ∫ê</span>
                    </button>
                </nav>

                <!-- ÂÜÖÂÆπÂå∫ÔºàÊªöÂä®Ôºâ -->
                <div class="detail-content custom-scrollbar">
                    <!-- ‰ø°ÊÅØ -->
                    <section x-show="tab==='info'">
                        <div class="detail-title-block">
                            <div class="detail-title-row">
                                <div class="detail-title-label">ËßíËâ≤ÂêçÁß∞</div>

                                <!-- ÂêçÁß∞ -->
                                <div class="detail-title-inline">
                                    <input type="text" x-model="editingData.char_name" class="detail-title-input">
                                </div>
                            </div>

                            <div class="detail-subrow flex-wrap gap-x-4 gap-y-2">

                                <!-- Âàõ‰ΩúËÄÖ -->
                                <div class="flex items-center gap-2 min-w-[120px] flex-shrink-0" title="Âàõ‰ΩúËÄÖ (Creator)">
                                    <span class="text-xs opacity-60">üé®</span>
                                    <input type="text" x-model="editingData.creator" placeholder="Êú™Áü•Âàõ‰ΩúËÄÖ"
                                        class="bg-transparent border-b border-dashed border-[var(--border-light)] text-xs text-[var(--text-sub)] focus:border-[var(--accent-main)] focus:text-[var(--text-main)] outline-none transition-colors w-full max-w-[150px] py-0.5">
                                </div>

                                <!-- Êù•Ê∫êÈìæÊé• -->
                                <div class="flex items-center gap-2 flex-1 min-w-[180px]">
                                    <span class="detail-link-icon text-xs">üîó</span>
                                    <input type="text" x-model="editingData.source_link" placeholder="Êù•Ê∫êÈìæÊé• (http://...)"
                                        class="detail-link-input text-xs w-full">
                                    <a x-show="editingData.source_link" :href="editingData.source_link" target="_blank"
                                        class="detail-open-link" title="ÊâìÂºÄÈìæÊé•">‚Üó</a>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- TAB: Âü∫Á°Ä -->
                    <section x-show="tab==='basic'" x-transition.opacity class="detail-section detail-section-fill">
                        <div class="detail-tab-scroll custom-scrollbar">
                            <div class="detail-card">
                                <div class="detail-card-head">
                                    <div class="detail-card-title flex items-center gap-2"
                                        style="color: var(--accent-light);">
                                        <span class="note-label-icon">üìå</span>
                                        <span>Êú¨Âú∞Â§áÊ≥® (Local Note)</span>
                                    </div>
                                    <button class="expand-btn" @click="openLargeEditor('ui_summary','Êú¨Âú∞Â§áÊ≥®')">‚§¢</button>
                                </div>
                                <textarea x-model="editingData.ui_summary" class="form-textarea note-textarea"
                                    style="height: 10rem; resize:none;" placeholder="ËøôÊòØ‰ªÖÂ≠òÂÇ®Âú®Êú¨Âú∞ÁöÑÁßÅÊúâÂ§áÊ≥®Ôºå‰∏ç‰ºöÂÜôÂÖ•ËßíËâ≤Âç°Êñá‰ª∂...">
                                    </textarea>
                            </div>

                            <div class="detail-card">
                                <div class="detail-card-head">
                                    <div class="detail-card-title">ÂéüÁÆÄ‰ªã (Description)</div>
                                    <button class="expand-btn" @click="openLargeEditor('description','ÂéüÁÆÄ‰ªã')">‚§¢</button>
                                </div>
                                <textarea x-model="editingData.description" class="form-textarea"
                                    style="height: 10rem; resize:none;"></textarea>
                            </div>
                        </div>
                    </section>

                    <section x-show="tab==='persona'" x-transition.opacity class="detail-section detail-section-fill">
                        <div class="detail-tab-scroll custom-scrollbar">

                            <!-- 1. ‰∫∫Ê†ºËÆæÂÆö (Personality) -->
                            <template x-if="editingData.personality">
                                <div class="detail-card"
                                    style="background: rgba(0,0,0,0.15); border-color: transparent;">
                                    <div class="detail-card-head py-1 min-h-[2rem]">
                                        <div class="detail-card-title text-xs text-gray-500 uppercase tracking-wider">
                                            ‰∫∫Ê†ºËÆæÂÆö (Personality)</div>
                                        <button
                                            class="expand-btn scale-90 opacity-50 hover:opacity-100 transition-opacity"
                                            @click="openLargeEditor('personality','‰∫∫Ê†ºËÆæÂÆö')">‚§¢</button>
                                    </div>
                                    <textarea readonly x-model="editingData.personality"
                                        class="form-textarea text-xs bg-transparent text-[var(--text-dim)] focus:outline-none custom-scrollbar"
                                        style="height: 8rem; resize:none; border:none; box-shadow: none;"></textarea>
                                </div>
                            </template>

                            <!-- 2. Âú∫ÊôØËÆæÂÆö (Scenario) -->
                            <template x-if="editingData.scenario">
                                <div class="detail-card"
                                    style="background: rgba(0,0,0,0.15); border-color: transparent;">
                                    <div class="detail-card-head py-1 min-h-[2rem]">
                                        <div class="detail-card-title text-xs text-gray-500 uppercase tracking-wider">
                                            Âú∫ÊôØËÆæÂÆö (Scenario)</div>
                                        <button
                                            class="expand-btn scale-90 opacity-50 hover:opacity-100 transition-opacity"
                                            @click="openLargeEditor('scenario','Âú∫ÊôØËÆæÂÆö')">‚§¢</button>
                                    </div>
                                    <textarea readonly x-model="editingData.scenario"
                                        class="form-textarea text-xs bg-transparent text-[var(--text-dim)] focus:outline-none custom-scrollbar"
                                        style="height: 6rem; resize:none; border:none; box-shadow: none;"></textarea>
                                </div>
                            </template>

                            <!-- 3. ‰ΩúËÄÖÊ≥®Èáä (Creator Notes) -->
                            <template x-if="editingData.creator_notes">
                                <div class="detail-card"
                                    style="background: rgba(0,0,0,0.15); border-color: transparent;">
                                    <div class="detail-card-head py-1 min-h-[2rem]">
                                        <div class="detail-card-title text-xs text-gray-500 uppercase tracking-wider">
                                            ‰ΩúËÄÖÊ≥®Èáä (Creator Notes)</div>
                                        <button
                                            class="expand-btn scale-90 opacity-50 hover:opacity-100 transition-opacity"
                                            @click="openLargeEditor('creator_notes','‰ΩúËÄÖÊ≥®Èáä')">‚§¢</button>
                                    </div>
                                    <textarea readonly x-model="editingData.creator_notes"
                                        class="form-textarea text-xs bg-transparent text-[var(--text-dim)] focus:outline-none custom-scrollbar"
                                        style="height: 6rem; resize:none; border:none; box-shadow: none;"></textarea>
                                </div>
                            </template>

                            <!-- 4. Á≥ªÁªüÊèêÁ§∫ËØç (System Prompt) -->
                            <template x-if="editingData.system_prompt">
                                <div class="detail-card"
                                    style="background: rgba(40, 20, 60, 0.15); border-color: transparent;">
                                    <div class="detail-card-head py-1 min-h-[2rem]">
                                        <div
                                            class="detail-card-title text-xs text-purple-400/70 uppercase tracking-wider">
                                            Á≥ªÁªüÊèêÁ§∫ËØç (System Prompt)</div>
                                        <button
                                            class="expand-btn scale-90 opacity-50 hover:opacity-100 transition-opacity"
                                            @click="openLargeEditor('system_prompt','Á≥ªÁªüÊèêÁ§∫ËØç')">‚§¢</button>
                                    </div>
                                    <textarea readonly x-model="editingData.system_prompt"
                                        class="form-textarea text-xs font-mono bg-transparent text-[var(--text-dim)] focus:outline-none custom-scrollbar"
                                        style="height: 6rem; resize:none; border:none; box-shadow: none;"></textarea>
                                </div>
                            </template>

                            <!-- 5. ÂéÜÂè≤Êåá‰ª§ (Post History) -->
                            <template x-if="editingData.post_history_instructions">
                                <div class="detail-card"
                                    style="background: rgba(40, 20, 60, 0.15); border-color: transparent;">
                                    <div class="detail-card-head py-1 min-h-[2rem]">
                                        <div
                                            class="detail-card-title text-xs text-purple-400/70 uppercase tracking-wider">
                                            ÂéÜÂè≤Êåá‰ª§ (Post History)</div>
                                        <button
                                            class="expand-btn scale-90 opacity-50 hover:opacity-100 transition-opacity"
                                            @click="openLargeEditor('post_history_instructions','ÂéÜÂè≤Êåá‰ª§')">‚§¢</button>
                                    </div>
                                    <textarea readonly x-model="editingData.post_history_instructions"
                                        class="form-textarea text-xs font-mono bg-transparent text-[var(--text-dim)] focus:outline-none custom-scrollbar"
                                        style="height: 6rem; resize:none; border:none; box-shadow: none;"></textarea>
                                </div>
                            </template>
                        </div>
                    </section>

                    <!-- TAB: ÂØπËØù -->
                    <section x-show="tab==='dialog'" x-transition.opacity class="detail-section detail-section-fill">
                        <div class="detail-tab-scroll custom-scrollbar">
                            <!-- First MessageÔºöÁºñËæë/È¢ÑËßà -->
                            <div class="detail-card detail-card--lg">
                                <div class="detail-card-head detail-card-head-row">
                                    <div class="detail-card-title">ÂºÄÂú∫ÁôΩ (First Message)</div>
                                    <div class="detail-card-actions">
                                        <button class="expand-btn"
                                            @click="openLargeEditor('first_mes','ÂºÄÂú∫ÁôΩ')">‚§¢</button>
                                        <div class="toggle-btn-group">
                                            <button class="toggle-btn" :class="!showFirstPreview ? 'active' : ''"
                                                @click="showFirstPreview=false">ÁºñËæë</button>
                                            <button class="toggle-btn" :class="showFirstPreview ? 'active' : ''"
                                                @click="showFirstPreview=true">HTMLÈ¢ÑËßà</button>
                                        </div>
                                    </div>
                                </div>

                                <textarea x-show="!showFirstPreview" x-model="editingData.first_mes"
                                    class="form-textarea" style="height: 10rem; resize:none;"></textarea>

                                <div x-show="showFirstPreview" class="form-textarea custom-scrollbar"
                                    style="height: 10rem; background: var(--bg-panel); border-color: var(--accent-main); padding: 0; overflow: auto;"
                                    x-effect="updateShadowContent($el, showFirstPreview ? editingData.first_mes : null)">
                                </div>
                            </div>

                            <!-- Mes Example -->
                            <div class="detail-card">
                                <div class="detail-card-head">
                                    <div class="detail-card-title">ÂØπËØùÁ§∫‰æã (Mes Example)</div>
                                    <button class="expand-btn" @click="openLargeEditor('mes_example','ÂØπËØùÁ§∫‰æã')">‚§¢</button>
                                </div>
                                <textarea x-model="editingData.mes_example" class="form-textarea"
                                    style="height: 10rem; resize:none; font-family: monospace; font-size: 0.85rem;"></textarea>
                            </div>

                            <!-- Alternate Greetings -->
                            <div class="detail-card detail-card--sm">
                                <div class="detail-card-head detail-card-head-row">
                                    <div class="detail-card-title">Â§áÁî®ÂºÄÂú∫ÁôΩ (Alternate Greetings)</div>

                                    <div class="detail-card-actions">
                                        <button class="expand-btn" x-show="editingData.alternate_greetings.length > 0"
                                            @click="openLargeEditor('alternate_greetings','Â§áÁî®ÂºÄÂú∫ÁôΩ #' + (altIdx+1), true, altIdx)">‚§¢</button>

                                        <div class="detail-alt-nav" x-show="editingData.alternate_greetings.length > 1">
                                            <button @click="prevAlt()" class="detail-alt-btn">‚Äπ</button>
                                            <span class="detail-alt-count"
                                                x-text="(altIdx+1) + '/' + editingData.alternate_greetings.length"></span>
                                            <button @click="nextAlt()" class="detail-alt-btn">‚Ä∫</button>
                                        </div>

                                        <button @click="removeAlt()" title="Âà†Èô§" class="btn-secondary detail-mini-btn"
                                            style="color:#f87171;">üóëÔ∏è</button>
                                        <button @click="addAlt()" title="Êñ∞Â¢û"
                                            class="btn-primary detail-mini-btn">Ôºã</button>
                                    </div>
                                </div>

                                <template x-if="editingData.alternate_greetings.length > 0">
                                    <textarea x-model="editingData.alternate_greetings[altIdx]" class="form-textarea"
                                        style="height: 8rem; resize:none;" placeholder="Âú®Ê≠§ËæìÂÖ•Â§áÁî®ÂºÄÂú∫ÁôΩ..."></textarea>
                                </template>
                            </div>
                        </div>
                    </section>

                    <!-- TAB: Ê†áÁ≠æ -->
                    <section x-show="tab==='tags'" x-transition.opacity class="detail-section custom-scrollbar">
                        <div class="detail-card">
                            <div class="detail-card-head detail-card-head-row">
                                <div class="detail-card-title">Ê†áÁ≠æ (Tags)</div>

                                <div class="detail-card-actions">
                                    <button @click="openTagPicker()" class="btn-secondary detail-mini-btn">
                                        üìö Ê†áÁ≠æÂ∫ì
                                    </button>

                                    <div class="detail-inline-input">
                                        <input type="text" x-model="newTagInput" @keydown.enter.prevent="addTag()"
                                            placeholder="Ëá™ÂÆö‰πâ (ÊîØÊåÅÊâπÈáè,ÈÄóÂè∑ÂàÜÈöî)..." title="ÊîØÊåÅËæìÂÖ•Â§ö‰∏™Ê†áÁ≠æÔºå‰ΩøÁî®ÈÄóÂè∑(,)ÊàñÁÆ°ÈÅìÁ¨¶(|)ÂàÜÈöî"
                                            class="detail-inline-text">
                                        <button @click="addTag()" class="detail-inline-add">+</button>
                                    </div>
                                </div>
                            </div>

                            <div class="detail-taglist">
                                <template x-for="tag in editingData.tags" :key="tag">
                                    <button type="button" @click="toggleTag(tag)" class="detail-tag">
                                        <span x-text="tag"></span>
                                        <span class="detail-tag-x">‚úï</span>
                                    </button>
                                </template>

                                <div x-show="!editingData.tags || editingData.tags.length===0" class="detail-muted">
                                    ÊöÇÊó†Ê†áÁ≠æ...
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- TAB: ‰∏ñÁïå‰π¶Ôºà‰øùÁïôÂéüÊúâ WI ÂùóÂäüËÉΩÔºåÂè™ÂÅöÂÆπÂô®ÁæéÂåñ‰∏éÊî∂Á∫≥Ôºâ -->
                    <section x-show="tab==='wi'" x-transition.opacity class="detail-section detail-section-fill">
                        <div class="detail-tab-scroll custom-scrollbar">
                            <!-- Áõ¥Êé•Â§çÁî®Áé∞Êúâ WI ÂÆπÂô®‰∏éÂÜÖÈÉ®ÈÄªËæëÔºàÊú™Âà†‰ªª‰ΩïÊñπÊ≥ï/Â≠óÊÆµÔºâ -->
                            <div class="wi-container" x-data="{ wiOpen: true }">
                                <input type="file" x-ref="wiImportInput" style="display:none" accept=".json,.jsonl"
                                    @change="handleWiImport">

                                <div class="wi-header group" @click="wiOpen = !wiOpen">
                                    <div class="flex items-center gap-2 mr-3 pointer-events-none">
                                        <span class="text-lg shadow-sm">üåé</span>
                                        <div class="flex flex-col leading-none">
                                            <span x-show="$store.global.deviceType !== 'mobile'"
                                                class="text-orange-400 font-bold text-xs uppercase tracking-wider">World
                                                Info</span>
                                            <span class="text-[10px] text-gray-500 font-mono mt-0.5">
                                                <span x-text="getWorldInfoCount()">0</span> Êù°ÁõÆ
                                            </span>
                                        </div>
                                    </div>

                                    <div x-show="$store.global.deviceType !== 'mobile'"
                                        class="flex-1 min-w-0 mx-2 relative group/input h-full flex items-center"
                                        @click.stop>
                                        <div class="w-[1px] h-6 mr-3" style="background: var(--border-light);">
                                        </div>
                                        <input type="text" x-model="editingData.character_book.name"
                                            placeholder="Êú™ÂëΩÂêç‰∏ñÁïå‰π¶..."
                                            class="w-full bg-transparent text-sm font-medium outline-none border-b border-transparent transition-colors py-1"
                                            style="color: var(--text-main);" title="‰∏ñÁïå‰π¶ÂêçÁß∞">
                                    </div>

                                    <div class="flex items-center gap-2 pl-2">
                                        <div class="flex items-center gap-2" @click.stop>
                                            <div class="flex rounded-lg p-0.5 border"
                                                style="background: var(--bg-sub); border-color: var(--border-light);">
                                                <button @click="$refs.wiImportInput.click()" title="ÂØºÂÖ•"
                                                    class="px-2 py-1 text-[10px] text-gray-400 hover:text-green-400 rounded transition-colors flex items-center gap-1">üìÇ</button>
                                                <div class="w-[1px] my-0.5" style="background: var(--border-light);">
                                                </div>
                                                <button @click="exportWorldBookSingle()" title="ÂØºÂá∫"
                                                    class="px-2 py-1 text-[10px] text-gray-400 hover:text-blue-400 rounded transition-colors flex items-center gap-1">üíæ</button>
                                            </div>

                                            <button @click="openFullScreenWI()" title="ÂÖ®Â±èÁºñËæë" class="btn-primary"
                                                style="padding: 0.35rem 0.75rem; font-size: 0.75rem; border-radius: 0.375rem;">
                                                ‚§¢ ÂÖ®Â±è
                                            </button>
                                        </div>

                                        <div class="pl-2 ml-1 border-l h-6 flex items-center justify-center"
                                            style="border-color: var(--border-light);">
                                            <span
                                                class="text-xs text-gray-500 transform transition-transform duration-300"
                                                :class="wiOpen ? 'rotate-180 text-orange-400' : 'rotate-0 group-hover:text-gray-300'">
                                                ‚ñº
                                            </span>
                                        </div>
                                    </div>
                                </div>

                                <div x-show="wiOpen" x-cloak class="wi-content custom-scrollbar">
                                    <!-- ‰ª•‰∏ã WI ÂÜÖÂÆπÔºö‰øùÊåÅÂéüÊù•ÁöÑÂäüËÉΩ -->
                                    <div class="flex justify-between items-center mb-3 px-1">
                                        <span class="text-xs text-gray-500">ÊèêÁ§∫: Ë∞ÉÊï¥ Order ÂèØÊîπÂèòËß¶ÂèëÈ°∫Â∫è</span>
                                        <button @click="addWiEntry()"
                                            class="text-xs bg-blue-600 hover:bg-blue-500 text-white px-3 py-1.5 rounded flex items-center gap-1 transition">
                                            ‚ûï Êñ∞Â¢ûÊù°ÁõÆ
                                        </button>
                                    </div>

                                    <div class="flex flex-col gap-2">
                                        <template x-for="(entry, index) in getWIArrayRef()" :key="index">
                                            <div x-data="{ expanded: false }"
                                                class="border rounded-md overflow-hidden transition-all"
                                                style="background: var(--bg-panel); border-color: var(--border-light);">
                                                <div class="flex items-center gap-2 p-2 cursor-pointer select-none"
                                                    style="background: var(--bg-sub);" @click="expanded = !expanded">
                                                    <div @click.stop class="flex items-center">
                                                        <input type="checkbox" x-model="entry.enabled"
                                                            class="cursor-pointer w-4 h-4 rounded">
                                                    </div>

                                                    <div class="flex-1 min-w-0 flex flex-col">
                                                        <div class="flex items-center gap-2">
                                                            <span class="text-xs font-bold"
                                                                style="color: var(--text-main);"
                                                                x-text="entry.comment || 'Êó†Â§áÊ≥®'"></span>
                                                            <span x-show="entry.constant"
                                                                class="text-[10px] px-1 rounded border"
                                                                style="background: var(--bg-tag); color: var(--accent-light); border-color: var(--accent-light);">Constant</span>
                                                        </div>
                                                        <div class="text-[10px] font-mono mt-0.5 break-all whitespace-normal"
                                                            style="color: var(--text-dim); line-height: 1.2;">
                                                            <span class="opacity-70">Keys:</span>
                                                            <span x-text="formatWiKeys(entry.keys)"
                                                                style="color: #ca8a04;"></span>
                                                        </div>
                                                    </div>

                                                    <div class="flex items-center gap-1" @click.stop>
                                                        <div class="flex flex-col mr-2">
                                                            <button @click="moveWiEntry(index, -1)"
                                                                class="text-[10px] text-gray-500 hover:text-white leading-none mb-1">‚ñ≤</button>
                                                            <button @click="moveWiEntry(index, 1)"
                                                                class="text-[10px] text-gray-500 hover:text-white leading-none">‚ñº</button>
                                                        </div>
                                                        <button @click="removeWiEntry(index)"
                                                            class="text-gray-500 hover:text-red-400 p-1 rounded transition">üóëÔ∏è</button>
                                                        <button @click="expanded = !expanded"
                                                            class="text-gray-500 hover:text-blue-400 p-1 transform transition-transform duration-200"
                                                            :class="expanded ? 'rotate-180' : ''">‚ñº</button>
                                                    </div>
                                                </div>

                                                <div x-show="expanded" x-collapse class="p-3 border-t space-y-3"
                                                    style="border-color: var(--border-light); background: var(--bg-panel);">

                                                    <div class="grid grid-cols-6 gap-3">
                                                        <div class="col-span-4">
                                                            <label
                                                                class="block text-[10px] text-purple-400 uppercase font-bold mb-1">Ëß¶ÂèëÂÖ≥ÈîÆÂ≠ó</label>
                                                            <input type="text" :value="formatWiKeys(entry.keys)"
                                                                @input="updateWiKeys(entry, $event.target.value)"
                                                                class="form-input text-xs" style="color: #fde047;"
                                                                placeholder="ËâæÈõÖ, Python">
                                                        </div>
                                                        <div class="col-span-2">
                                                            <label
                                                                class="block text-[10px] text-gray-500 uppercase font-bold mb-1">ÊùÉÈáç
                                                                (Order)</label>
                                                            <input type="number" x-model.number="entry.insertion_order"
                                                                class="form-input text-xs">
                                                        </div>
                                                    </div>

                                                    <div>
                                                        <div class="flex justify-between items-center mb-1">
                                                            <label
                                                                class="text-[10px] text-green-400 uppercase font-bold">ÂÜÖÂÆπ
                                                                (Content)</label>
                                                            <div class="text-[10px] text-gray-600">Token: <span
                                                                    x-text="estimateTokens(entry.content)"></span>
                                                            </div>
                                                        </div>
                                                        <textarea x-model="entry.content" rows="4"
                                                            class="form-textarea text-xs font-mono custom-scrollbar break-all"
                                                            placeholder="ÂÜÖÂÆπ..." style="word-break: break-all;">
                                                            </textarea>
                                                    </div>

                                                    <div class="flex items-center gap-4">
                                                        <div class="flex-1">
                                                            <label
                                                                class="block text-[10px] text-gray-500 uppercase font-bold mb-1">Â§áÊ≥®</label>
                                                            <input type="text" x-model="entry.comment"
                                                                class="form-input text-xs" placeholder="‰ªÖ‰ΩúÊ†áËÆ∞">
                                                        </div>
                                                        <div class="flex items-center pt-4">
                                                            <label class="flex items-center gap-2 cursor-pointer">
                                                                <input type="checkbox" x-model="entry.constant"
                                                                    class="rounded w-4 h-4">
                                                                <span class="text-xs text-accent">Constant
                                                                    (Â∏∏È©ª)</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </template>

                                        <div x-show="getWIArrayRef().length === 0"
                                            class="text-center py-8 text-gray-600 border border-dashed border-gray-700 rounded-lg">
                                            <p class="text-sm">ÊöÇÊó†‰∏ñÁïå‰π¶Êù°ÁõÆ</p>
                                            <button @click="addWiEntry()"
                                                class="mt-2 text-xs text-blue-400 hover:underline">ÁÇπÂáªÊ∑ªÂä†Á¨¨‰∏ÄÊù°</button>
                                        </div>
                                    </div>

                                    <div class="wi-raw-section" x-data="{ showRaw: false }">
                                        <button
                                            @click="showRaw = !showRaw; if(showRaw) editingData.character_book_raw = JSON.stringify(editingData.character_book, null, 2)"
                                            class="text-[10px] underline flex items-center gap-1 transition-colors"
                                            style="color: var(--text-dim);">
                                            ‚öôÔ∏è <span x-text="showRaw ? 'ÈöêËóèÂéüÂßãÊï∞ÊçÆ' : 'Êü•Áúã/ÁºñËæëÂéüÂßã JSON (Advanced)'"></span>
                                        </button>
                                        <div x-show="showRaw" class="mt-2">
                                            <textarea x-model="editingData.character_book_raw"
                                                class="wi-raw-textarea w-full h-40 custom-scrollbar"></textarea>
                                            <button @click="if(applyCharacterBookJson()) showRaw=false"
                                                class="btn-danger-xs">‚ö† Â∫îÁî® JSON Ë¶ÜÁõñÂΩìÂâçË°®Ê†º</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- TAB: ÁÆ°ÁêÜ -->
                    <section x-show="tab==='manage'" x-transition.opacity class="detail-section custom-scrollbar">
                        <div class="detail-card">
                            <div class="detail-card-head">
                                <div class="detail-card-title">Â∑•ÂÖ∑ÁÆ±</div>
                            </div>

                            <div class="detail-toolbox">
                                <div class="toolbox-group">
                                    <div class="toolbox-title">üìå ÂÆö‰Ωç‰∏éÊñá‰ª∂</div>
                                    <div class="toolbox-grid">
                                        <button @click="locateCard()" class="toolbox-btn">üéØ Ë∑≥ËΩ¨ÂÆö‰Ωç</button>
                                        <button @click="openCardLocation()" class="toolbox-btn">üìÇ ÊâìÂºÄÊâÄÂú®Êñá‰ª∂Â§π</button>
                                    </div>
                                </div>

                                <div class="toolbox-group">
                                    <div class="toolbox-title">üï∞Ô∏è Â§á‰ªΩ‰∏éÂõûÊªö</div>
                                    <div class="toolbox-grid">
                                        <button @click="openRollback('card')" class="toolbox-btn warn">‚è™
                                            Êó∂ÂÖâÊú∫</button>
                                        <button @click="openBackupFolder('card')" class="toolbox-btn">üóÉÔ∏è
                                            ÊâìÂºÄÂ§á‰ªΩÁõÆÂΩï</button>
                                        <!-- <button @click="createSnapshot('card')"
                                                @contextmenu.prevent="createKeySnapshot('card')"
                                                class="toolbox-btn amber">üì∏ Âø´ÁÖß</button> -->
                                    </div>
                                </div>

                                <div class="toolbox-group">
                                    <div class="toolbox-title">üõ†Ô∏è È´òÁ∫ß</div>
                                    <div class="toolbox-grid">
                                        <button @click="openAdvancedEditor()" class="toolbox-btn purple">üõ†Ô∏è
                                            È´òÁ∫ßÊâ©Â±ï</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="detail-card">
                            <div class="detail-card-head">
                                <div class="detail-card-title">
                                    <!-- Âå∫ÂàÜÊòæÁ§∫ -->
                                    <span x-show="!activeCard.is_bundle">Êñá‰ª∂Âêç</span>
                                    <span x-show="activeCard.is_bundle">
                                        <span style="color:#fbbf24;">ËßíËâ≤ÂåÖ (Êñá‰ª∂Â§π)</span> / ÂΩìÂâçÁâàÊú¨Êñá‰ª∂
                                    </span>
                                </div>
                            </div>

                            <!-- ÊôÆÈÄöÊ®°ÂºèÔºöÂè™ÊòæÁ§∫‰∏Ä‰∏™ËæìÂÖ•Ê°Ü -->
                            <div x-show="!activeCard.is_bundle">
                                <input type="text" x-model="editingData.filename" class="form-input">
                            </div>

                            <!-- ÂåÖÊ®°ÂºèÔºöÊòæÁ§∫‰∏§‰∏™ËæìÂÖ•Ê°Ü -->
                            <div x-show="activeCard.is_bundle" class="flex flex-col gap-2">
                                <!-- 1. Êñá‰ª∂Â§πÂêç (ÂØπÂ∫î Bundle Name) -->
                                <div class="flex items-center gap-2">
                                    <span
                                        class="text-xs w-16 text-yellow-500 font-bold text-right flex-shrink-0">Êñá‰ª∂Â§π:</span>
                                    <!-- ÊòæÁ§∫ÂΩìÂâçÊñá‰ª∂Â§πË∑ØÂæÑÔºå‰∏çÂèØÁºñËæë -->
                                    <div
                                        class="text-sm font-mono text-[var(--text-main)] px-2 py-1 bg-[var(--bg-sub)] rounded border border-[var(--border-light)] flex-1 truncate">
                                        <span x-text="activeCard.bundle_dir"></span>
                                    </div>
                                    <!-- Áã¨Á´ãÁöÑÈáçÂëΩÂêçÊåâÈíÆ -->
                                    <button @click="renameFolderFromDetail(activeCard.bundle_dir)"
                                        class="btn-secondary text-xs px-2 py-1 whitespace-nowrap">ÈáçÂëΩÂêç</button>
                                </div>

                                <!-- 2. ÂΩìÂâçÁâàÊú¨Êñá‰ª∂Âêç -->
                                <div class="flex items-center gap-2">
                                    <span
                                        class="text-xs w-16 text-blue-400 font-bold text-right flex-shrink-0">ÂΩìÂâçÊñá‰ª∂:</span>
                                    <!-- Ëøô‰∏™ input ÁªëÂÆö editingData.filenameÔºåÁÇπÂáªÂ∫ïÈÉ®ÁöÑ‚Äú‰øùÂ≠ò‚ÄùÊåâÈíÆÊó∂ÁîüÊïà -->
                                    <input type="text" x-model="editingData.filename"
                                        class="form-input flex-1 font-mono text-sm">
                                </div>
                                <div class="detail-muted mt-1 text-xs">
                                    ÊèêÁ§∫: ‰øÆÊîπ "ÂΩìÂâçÊñá‰ª∂" Â∞ÜÈáçÂëΩÂêçÂåÖÂÜÖÁöÑËøôÂº†ÂÖ∑‰ΩìÂõæÁâáÔºåÈúÄÁÇπÂáªÂ∫ïÈÉ®‰øùÂ≠òÁîüÊïà„ÄÇ
                                </div>
                            </div>
                        </div>

                        <div class="detail-card">
                            <div class="detail-card-head">
                                <div class="detail-card-title">Êõ¥Êñ∞ËßíËâ≤Âç° (Update)</div>
                            </div>

                            <!-- Á≠ñÁï•ÈÄâÊã© -->
                            <div class="px-3 pt-2 pb-3 border-b border-[var(--border-light)] bg-[var(--bg-sub)]/50">
                                <div class="text-xs font-bold mb-2 text-[var(--text-dim)] flex items-center gap-2">
                                    <span>üõ†Ô∏è ÂõæÁâáÂ§ÑÁêÜÁ≠ñÁï•</span>
                                    <span class="text-[10px] font-normal opacity-60">(ÈÄÇÁî®‰∫éÊñá‰ª∂‰∏ä‰º†Âíå URL Êõ¥Êñ∞)</span>
                                </div>
                                <div class="grid grid-cols-2 gap-2">
                                    <label
                                        class="flex items-center gap-2 cursor-pointer p-1.5 rounded hover:bg-[var(--bg-panel)] transition-colors border border-transparent hover:border-[var(--border-light)]">
                                        <input type="radio" name="update_policy" value="overwrite"
                                            x-model="updateImagePolicy" class="accent-[var(--accent-main)]">
                                        <div class="flex flex-col">
                                            <span class="text-xs font-bold text-[var(--text-main)]">üîÑ Áõ¥Êé•Ë¶ÜÁõñ</span>
                                            <span class="text-[10px] text-[var(--text-dim)]">‰ΩøÁî®Êñ∞ÂõæÔºå‰∏çÁïôÊóßÂõæ</span>
                                        </div>
                                    </label>
                                    <label
                                        class="flex items-center gap-2 cursor-pointer p-1.5 rounded hover:bg-[var(--bg-panel)] transition-colors border border-transparent hover:border-[var(--border-light)]">
                                        <input type="radio" name="update_policy" value="keep_image"
                                            x-model="updateImagePolicy" class="accent-[var(--accent-main)]">
                                        <div class="flex flex-col">
                                            <span class="text-xs font-bold text-[var(--text-main)]">üñºÔ∏è ‰øùÁïôÂéüÂõæ</span>
                                            <span class="text-[10px] text-[var(--text-dim)]">Âè™Êõ¥Êñ∞Êï∞ÊçÆÔºåÂøΩÁï•Êñ∞Âõæ</span>
                                        </div>
                                    </label>
                                    <label
                                        class="flex items-center gap-2 cursor-pointer p-1.5 rounded hover:bg-[var(--bg-panel)] transition-colors border border-transparent hover:border-[var(--border-light)]">
                                        <input type="radio" name="update_policy" value="archive_old"
                                            x-model="updateImagePolicy" class="accent-[var(--accent-main)]">
                                        <div class="flex flex-col">
                                            <span class="text-xs font-bold text-[var(--text-main)]">üìÇ ÂΩíÊ°£ÊóßÂõæ</span>
                                            <span class="text-[10px] text-[var(--text-dim)]">ÊóßÂõæÂ≠òÂÖ•ËµÑÊ∫êÁõÆÂΩï</span>
                                        </div>
                                    </label>
                                    <label
                                        class="flex items-center gap-2 cursor-pointer p-1.5 rounded hover:bg-[var(--bg-panel)] transition-colors border border-transparent hover:border-[var(--border-light)]">
                                        <input type="radio" name="update_policy" value="archive_new"
                                            x-model="updateImagePolicy" class="accent-[var(--accent-main)]">
                                        <div class="flex flex-col">
                                            <span class="text-xs font-bold text-[var(--text-main)]">‚ú® Êñ∞ÂõæÂΩíÊ°£</span>
                                            <span class="text-[10px] text-[var(--text-dim)]">Êñ∞ÂõæÂ≠ò‰∏∫ÁöÆËÇ§Ôºå‰øùÁïôÂéüÂõæ</span>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <div class="detail-manage-grid">
                                <!-- 1. Êñá‰ª∂Ë¶ÜÁõñ / ÂçáÁ∫ß (ÈõÜÊàêÊãñÊãΩÂäüËÉΩ) -->
                                <div class="detail-manage-box relative transition-all duration-200 group"
                                    :class="dragOverUpdate ? 'border-[var(--accent-main)] bg-[var(--accent-main)]/10' : 'border-dashed border-[var(--border-light)] hover:border-[var(--text-dim)] bg-[var(--bg-sub)]/30 hover:bg-[var(--bg-sub)]'"
                                    style="border-width: 2px; cursor: pointer; justify-content: center; align-items: center; text-align: center; gap: 0.5rem; min-height: 8rem;"
                                    @click="triggerCardUpdate()" @dragover.prevent="dragOverUpdate = true"
                                    @dragleave.prevent="dragOverUpdate = false"
                                    @drop.prevent="handleUpdateDrop($event)">

                                    <div class="text-3xl transition-transform duration-200 mb-1"
                                        :class="dragOverUpdate ? 'scale-110' : 'group-hover:scale-110'">
                                        üìÇ
                                    </div>

                                    <div class="flex flex-col items-center">
                                        <div class="detail-manage-label" style="margin:0; border:none; padding:0;">Êñá‰ª∂Ë¶ÜÁõñ
                                            / ÂçáÁ∫ß</div>
                                        <div class="text-[10px] text-[var(--text-dim)] mt-1 leading-tight opacity-80">
                                            <span x-show="!dragOverUpdate">ÁÇπÂáªÈÄâÊã© Êàñ ÊãñÊãΩÊñá‰ª∂</span>
                                            <span x-show="dragOverUpdate"
                                                class="text-[var(--accent-main)] font-bold">ÊùæÂºÄ‰ª•Êõ¥Êñ∞</span>
                                        </div>
                                    </div>

                                    <!-- ÈöêËóèÁöÑÊñá‰ª∂ËæìÂÖ•Ê°Ü (Â§çÁî®ÂéüÊúâÂºïÁî®) -->
                                    <input type="file" x-ref="cardUpdateInput" @change="handleCardUpdate"
                                        accept=".png,.json" style="display:none;">
                                </div>

                                <div class="detail-manage-box">
                                    <div class="detail-manage-label">URL Êõ¥Êñ∞</div>
                                    <div class="detail-muted">‰ªé PNG Áõ¥ÈìæÊõ¥Êñ∞</div>
                                    <div class="detail-manage-actions">
                                        <button @click="triggerUrlUpdate()" class="btn-update-card btn-update-url">üåê
                                            URL Êõ¥Êñ∞</button>
                                    </div>
                                </div>

                                <div class="detail-manage-box" style="border-color: var(--accent-light);"
                                    x-show="currentSkinIndex >= 0">
                                    <div class="detail-manage-label flex items-center gap-2">
                                        <span>üñºÔ∏è ÁöÆËÇ§Êç¢Â∞Å</span>
                                        <span
                                            class="text-[10px] bg-[var(--accent-main)] text-white px-1.5 rounded">Selected</span>
                                    </div>
                                    <div class="detail-muted truncate" :title="skinImages[currentSkinIndex]">
                                        ÂΩìÂâçÈÄâ‰∏≠: <span class="font-mono text-[var(--text-main)]"
                                            x-text="skinImages[currentSkinIndex]"></span>
                                    </div>

                                    <div class="detail-manage-actions flex-col items-stretch gap-2">
                                        <!-- ÈÄâÈ°πÔºö‰øùÁïôÂéüÂõæ -->
                                        <label
                                            class="flex items-center gap-2 cursor-pointer select-none p-1 rounded hover:bg-[var(--bg-sub)] transition-colors border border-transparent hover:border-[var(--border-light)]">
                                            <input type="checkbox" x-model="saveOldCoverOnSwap"
                                                class="accent-[var(--accent-main)] w-3.5 h-3.5">
                                            <span class="text-xs text-[var(--text-dim)]">Â∞ÜÂΩìÂâçÂ∞ÅÈù¢ÂΩíÊ°£Ëá≥ËµÑÊ∫êÁõÆÂΩï</span>
                                        </label>

                                        <!-- ÊåâÈíÆ -->
                                        <div class="flex gap-2">
                                            <!-- ËÆæ‰∏∫Â∞ÅÈù¢ÊåâÈíÆ -->
                                            <button @click="setSkinAsCover(skinImages[currentSkinIndex])"
                                                class="btn-secondary flex-1 justify-center font-bold text-[var(--accent-main)] border-[var(--accent-main)] hover:bg-[var(--accent-main)] hover:text-white transition-all shadow-sm">
                                                ‚ú® ËÆæ‰∏∫Â∞ÅÈù¢
                                            </button>

                                            <!-- Âà†Èô§ÁöÆËÇ§ÊåâÈíÆ (Êñ∞Â¢û) -->
                                            <button @click="deleteCurrentSkin()"
                                                class="btn-secondary w-10 flex items-center justify-center text-red-400 border-red-400/50 hover:bg-red-500 hover:text-white hover:border-red-500 transition-all shadow-sm"
                                                title="Âà†Èô§Ê≠§ÁöÆËÇ§Êñá‰ª∂">
                                                üóëÔ∏è
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Áä∂ÊÄÅ B: ÂΩìÊú™ÈÄâ‰∏≠ÁöÆËÇ§ (Main Êàñ Bundle Version) Êó∂ÊòæÁ§∫Âç†‰Ωç -->
                                <div class="detail-manage-box opacity-60 grayscale" style="border-style: dashed;"
                                    x-show="currentSkinIndex === -1">
                                    <div class="detail-manage-label text-[var(--text-dim)]">ÁöÆËÇ§Êç¢Â∞Å</div>
                                    <div class="detail-muted">
                                        <span x-show="skinImages.length > 0">ËØ∑ÂÖàÂú®Â∑¶‰æßÂàóË°®ÈÄâÊã©‰∏ÄÂº†ÁöÆËÇ§</span>
                                        <span x-show="skinImages.length === 0">ÂΩìÂâçÊó†ÂèØÁî®ÁöÆËÇ§ËµÑÊ∫ê</span>
                                    </div>
                                    <div class="detail-manage-actions">
                                        <button disabled
                                            class="btn-secondary w-full justify-center cursor-not-allowed opacity-50 text-xs">
                                            üö´ ÈúÄÂÖàÈÄâÂõæ
                                        </button>
                                    </div>
                                </div>

                                <div class="detail-manage-box">
                                    <div class="detail-manage-label">ÂèëÈÄÅÂà∞ SillyTavern</div>
                                    <div class="detail-muted">ÈÄöËøáÈÖçÁΩÆÁöÑ ST Âú∞ÂùÄÂèëÈÄÅÂΩìÂâçÂç°</div>
                                    <div class="detail-manage-actions">
                                        <button id="btn-send-st" @click="sendToST()"
                                            class="bg-indigo-600 hover:bg-indigo-500 text-white border border-indigo-500/50 px-4 py-2 rounded-lg cursor-pointer text-sm flex items-center gap-2 transition-all shadow-lg">
                                            üöÄ ÂèëÈÄÅÂà∞ ST
                                        </button>
                                    </div>
                                </div>

                                <div class="detail-manage-box danger">
                                    <div class="detail-manage-label">Âà†Èô§</div>
                                    <div class="detail-muted">ÁßªËá≥ÂõûÊî∂Á´ôÔºàÂèØÂú®ËÆæÁΩÆÈ°µÊâìÂºÄÂõûÊî∂Á´ôÁõÆÂΩïÔºâ</div>
                                    <div class="detail-manage-actions">
                                        <button @click="deleteCards([activeCard.id])" class="btn-secondary"
                                            style="border-color:#ef4444; color:#ef4444;">
                                            üóëÔ∏è ÁßªËá≥ÂõûÊî∂Á´ô
                                        </button>
                                        <button x-show="activeCard.is_bundle" @click="unbundleCard()"
                                            class="btn-secondary" style="border-color:#fbbf24; color:#fbbf24;">
                                            üíî ÂèñÊ∂àËÅöÂêà
                                        </button>
                                    </div>
                                </div>
                                <div class="detail-manage-box" x-show="!activeCard.is_bundle">
                                    <div class="detail-manage-label">ËΩ¨Êç¢‰∏∫ÂåÖÊ®°Âºè</div>
                                    <div class="detail-muted">ÂàõÂª∫Êñá‰ª∂Â§πÂπ∂Â∞ÜÊ≠§Âç°ÁâáÁßªÂÖ•ÔºåÂºÄÂêØÂ§öÁâàÊú¨ÁÆ°ÁêÜ</div>
                                    <div class="detail-manage-actions">
                                        <button @click="convertToBundle()" class="btn-secondary"
                                            style="border-color: #f59e0b; color: #f59e0b;">
                                            üì¶ ËΩ¨‰∏∫ÂåÖ (Bundle)
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Â¢ûÂä†Â∫ïÈÉ®ÁïôÁôΩÔºåÈò≤Ê≠¢ÊªöÂä®Âà∞Â∫ïÈÉ®Â§™Ë¥¥Ëæπ -->
                        <div style="height: 1rem; flex-shrink: 0;"></div>
                    </section>

                    <!-- TAB: ËµÑÊ∫ê (Resources) -->
                    <section x-show="tab==='resources'" x-transition.opacity class="detail-section detail-section-fill">
                        <div class="detail-tab-scroll custom-scrollbar p-4">

                            <!-- Áä∂ÊÄÅ A: Êú™ËÆæÁΩÆËµÑÊ∫êÁõÆÂΩï -->
                            <template x-if="!editingData.resource_folder">
                                <div
                                    class="flex flex-col items-center justify-center h-64 text-[var(--text-dim)] border-2 border-dashed border-[var(--border-light)] rounded-xl bg-[var(--bg-sub)]">
                                    <div class="text-4xl mb-2 opacity-50">üìÇ</div>
                                    <p class="text-sm font-bold">Êú™ËÆæÁΩÆËµÑÊ∫êÁõÆÂΩï</p>
                                    <p class="text-xs mt-1 mb-4 opacity-70">ÈúÄË¶ÅÂÖàÂÖ≥ËÅî‰∏Ä‰∏™Êñá‰ª∂Â§πÊâçËÉΩÂ≠òÊîæËµÑÊ∫ê</p>
                                    <button @click="createResourceFolder()"
                                        class="btn-primary px-4 py-2 rounded shadow-lg">
                                        ‚ú® Á´ãÂç≥Ëá™Âä®ÂàõÂª∫
                                    </button>
                                </div>
                            </template>

                            <!-- Áä∂ÊÄÅ B: Â∑≤ËÆæÁΩÆËµÑÊ∫êÁõÆÂΩï -->
                            <template x-if="editingData.resource_folder">
                                <div class="flex flex-col gap-4 h-full">

                                    <!-- 1. ÊãñÊãΩ‰∏ä‰º†Âå∫ -->
                                    <div class="relative flex-shrink-0 group transition-all duration-300"
                                        :class="dragOverResource ? 'bg-blue-500/10 border-blue-500' : 'bg-[var(--bg-sub)] border-[var(--border-light)] hover:border-[var(--accent-main)]'"
                                        style="border-width: 2px; border-style: dashed; border-radius: 0.75rem; min-height: 8rem; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer;"
                                        @dragover.prevent="dragOverResource = true"
                                        @dragleave.prevent="dragOverResource = false"
                                        @drop.prevent="handleResourceDrop($event)"
                                        @click="$refs.resourceFileInput.click()">

                                        <input type="file" x-ref="resourceFileInput" multiple style="display: none;"
                                            @change="handleResourceDrop({dataTransfer: {files: $event.target.files}})">

                                        <div class="flex items-center gap-3 pointer-events-none">
                                            <div class="text-3xl transition-transform duration-300"
                                                :class="dragOverResource ? 'scale-110' : 'grayscale opacity-50 group-hover:grayscale-0 group-hover:opacity-100'">
                                                üì•
                                            </div>
                                            <div class="text-left">
                                                <h4 class="font-bold text-sm"
                                                    :class="dragOverResource ? 'text-blue-400' : 'text-[var(--text-main)]'">
                                                    ÁÇπÂáªÊàñÊãñÊãΩÊñá‰ª∂‰∏ä‰º†
                                                </h4>
                                                <div class="text-[10px] text-[var(--text-dim)] mt-0.5 leading-tight">
                                                    <span class="text-green-400">ÂõæÁâá</span>(Skins)
                                                    <span class="text-orange-400">‰∏ñÁïå‰π¶</span>
                                                    <span class="text-blue-400">Ê≠£Âàô</span>
                                                    <span class="text-purple-400">ËÑöÊú¨</span>
                                                    <br>‰ºöËá™Âä®ÂΩíÁ±ªÂà∞ÂØπÂ∫îÊñá‰ª∂Â§π
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 2. ËµÑÊ∫êÂàóË°® (Â∑¶Âè≥ÂàÜÊ†è) -->
                                    <div class="flex-1 min-h-0 grid grid-cols-1 md:grid-cols-2 gap-4">

                                        <!-- Â∑¶Ê†èÔºöÁöÆËÇ§ (ÂõæÁâá) -->
                                        <div
                                            class="flex flex-col min-h-0 border border-[var(--border-light)] rounded-lg bg-[var(--bg-sub)]/30">
                                            <div
                                                class="p-2 border-b border-[var(--border-light)] flex justify-between items-center bg-[var(--bg-sub)] rounded-t-lg">
                                                <span
                                                    class="text-xs font-bold text-[var(--text-dim)] uppercase flex items-center gap-1">
                                                    <span>üñºÔ∏è</span> ÁöÆËÇ§ (Skins)
                                                </span>
                                                <span class="text-[10px] text-[var(--text-dim)]"
                                                    x-text="skinImages.length + ' items'"></span>
                                            </div>

                                            <div class="flex-1 overflow-y-auto custom-scrollbar p-2">
                                                <div class="grid grid-cols-3 gap-2">
                                                    <template x-for="(skin, idx) in skinImages" :key="skin">
                                                        <div class="relative group aspect-square rounded overflow-hidden border border-[var(--border-light)] bg-black/20 cursor-pointer"
                                                            @click="currentSkinIndex = idx; isCardFlipped=false">
                                                            <img :src="getSkinUrl(skin)"
                                                                class="w-full h-full object-cover transition-transform group-hover:scale-110">
                                                            <!-- ÈÄâ‰∏≠Ê†áËÆ∞ -->
                                                            <div x-show="currentSkinIndex === idx"
                                                                class="absolute inset-0 border-2 border-[var(--accent-main)] z-10 pointer-events-none">
                                                            </div>
                                                            <!-- ÊÇ¨ÊµÆÈÅÆÁΩ© -->
                                                            <div
                                                                class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                                                                <span class="text-[10px] text-white font-bold">È¢ÑËßà</span>
                                                            </div>
                                                            <div class="absolute bottom-0 left-0 right-0 bg-black/60 text-[9px] text-white px-1 truncate"
                                                                x-text="skin"></div>
                                                        </div>
                                                    </template>
                                                </div>
                                                <div x-show="skinImages.length === 0"
                                                    class="h-full flex items-center justify-center text-[var(--text-dim)] text-xs italic">
                                                    ÊöÇÊó†ÂõæÁâá
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Âè≥Ê†èÔºöÈÄªËæëÊñá‰ª∂ (Lorebooks / Regex / Scripts) -->
                                        <div class="flex flex-col min-h-0 gap-3 overflow-y-auto custom-scrollbar pr-1">

                                            <!-- ‰∏ñÁïå‰π¶ÂàóË°® -->
                                            <div
                                                class="border border-[var(--border-light)] rounded-lg bg-[var(--bg-sub)]/30 flex flex-col">
                                                <div
                                                    class="p-2 border-b border-[var(--border-light)] bg-[var(--bg-sub)] rounded-t-lg">
                                                    <span
                                                        class="text-xs font-bold text-orange-400 uppercase flex items-center gap-1">
                                                        <span>üåé</span> ‰∏ñÁïå‰π¶ (Lorebooks)
                                                    </span>
                                                </div>
                                                <div class="p-2 space-y-1">
                                                    <template x-for="file in resourceLorebooks" :key="file.path">
                                                        <div class="flex items-center justify-between p-2 rounded border border-transparent hover:border-[var(--border-light)] hover:bg-[var(--bg-hover)] cursor-pointer group transition-colors"
                                                            @click="window.dispatchEvent(new CustomEvent('open-wi-file', { detail: { id: file.path, source_type: 'resource', file_path: file.path, name: file.name } }))">
                                                            <div class="flex items-center gap-2 min-w-0">
                                                                <span class="text-orange-400 text-sm">üìò</span>
                                                                <span class="text-xs text-[var(--text-main)] truncate"
                                                                    x-text="file.name"></span>
                                                            </div>
                                                            <span
                                                                class="text-[10px] text-[var(--text-dim)] opacity-0 group-hover:opacity-100">ÁºñËæë</span>
                                                        </div>
                                                    </template>
                                                    <div x-show="resourceLorebooks.length === 0"
                                                        class="text-[10px] text-[var(--text-dim)] text-center py-2 italic">
                                                        Êó†Êñá‰ª∂</div>
                                                </div>
                                            </div>

                                            <!-- Ê≠£ÂàôËÑöÊú¨ÂàóË°® -->
                                            <div
                                                class="border border-[var(--border-light)] rounded-lg bg-[var(--bg-sub)]/30 flex flex-col">
                                                <div
                                                    class="p-2 border-b border-[var(--border-light)] bg-[var(--bg-sub)] rounded-t-lg">
                                                    <span
                                                        class="text-xs font-bold text-blue-400 uppercase flex items-center gap-1">
                                                        <span>üß©</span> Ê≠£ÂàôËÑöÊú¨ (Regex)
                                                    </span>
                                                </div>
                                                <div class="p-2 space-y-1">
                                                    <template x-for="file in resourceRegex" :key="file.path">
                                                        <div class="flex items-center justify-between p-2 rounded border border-transparent hover:border-[var(--border-light)] hover:bg-[var(--bg-hover)] cursor-pointer group transition-colors"
                                                            @click="openResourceScript(file, 'regex')">
                                                            <div class="flex items-center gap-2 min-w-0">
                                                                <span class="text-blue-400 text-sm">üìÑ</span>
                                                                <span class="text-xs text-[var(--text-main)] truncate"
                                                                    x-text="file.name"></span>
                                                            </div>
                                                            <span
                                                                class="text-[10px] text-[var(--text-dim)] opacity-0 group-hover:opacity-100">ÁºñËæë</span>
                                                        </div>
                                                    </template>
                                                    <div x-show="resourceRegex.length === 0"
                                                        class="text-[10px] text-[var(--text-dim)] text-center py-2 italic">
                                                        Êó†Êñá‰ª∂</div>
                                                </div>
                                            </div>

                                            <!-- Êâ©Â±ïËÑöÊú¨ÂàóË°® -->
                                            <div
                                                class="border border-[var(--border-light)] rounded-lg bg-[var(--bg-sub)]/30 flex flex-col">
                                                <div
                                                    class="p-2 border-b border-[var(--border-light)] bg-[var(--bg-sub)] rounded-t-lg">
                                                    <span
                                                        class="text-xs font-bold text-purple-400 uppercase flex items-center gap-1">
                                                        <span>üìú</span> Êâ©Â±ïËÑöÊú¨ (Scripts)
                                                    </span>
                                                </div>
                                                <div class="p-2 space-y-1">
                                                    <template x-for="file in resourceScripts" :key="file.path">
                                                        <div class="flex items-center justify-between p-2 rounded border border-transparent hover:border-[var(--border-light)] hover:bg-[var(--bg-hover)] cursor-pointer group transition-colors"
                                                            @click="openResourceScript(file, 'script')">
                                                            <div class="flex items-center gap-2 min-w-0">
                                                                <span class="text-purple-400 text-sm">üìú</span>
                                                                <span class="text-xs text-[var(--text-main)] truncate"
                                                                    x-text="file.name"></span>
                                                            </div>
                                                            <span
                                                                class="text-[10px] text-[var(--text-dim)] opacity-0 group-hover:opacity-100">ÁºñËæë</span>
                                                        </div>
                                                    </template>
                                                    <div x-show="resourceScripts.length === 0"
                                                        class="text-[10px] text-[var(--text-dim)] text-center py-2 italic">
                                                        Êó†Êñá‰ª∂</div>
                                                </div>
                                            </div>

                                            <!-- Âè≥‰æßÊ†è‰∏ãÊñπÔºöÂø´ÈÄüÂõûÂ§çÂàóË°® -->
                                            <div
                                                class="border border-[var(--border-light)] rounded-lg bg-[var(--bg-sub)]/30 flex flex-col">
                                                <div
                                                    class="p-2 border-b border-[var(--border-light)] bg-[var(--bg-sub)] rounded-t-lg">
                                                    <span
                                                        class="text-xs font-bold text-yellow-500 uppercase flex items-center gap-1">
                                                        <span>‚ö°</span> Âø´ÈÄüÂõûÂ§ç (Quick Replies)
                                                    </span>
                                                </div>
                                                <div class="p-2 space-y-1">
                                                    <template x-for="file in resourceQuickReplies" :key="file.path">
                                                        <div class="flex items-center justify-between p-2 rounded border border-transparent hover:border-[var(--border-light)] hover:bg-[var(--bg-hover)] cursor-pointer group transition-colors"
                                                            @click="openResourceScript(file, 'quick_reply')">
                                                            <div class="flex items-center gap-2 min-w-0">
                                                                <span class="text-yellow-500 text-sm">‚ö°</span>
                                                                <span class="text-xs text-[var(--text-main)] truncate"
                                                                    x-text="file.name"></span>
                                                            </div>
                                                            <span
                                                                class="text-[10px] text-[var(--text-dim)] opacity-0 group-hover:opacity-100">ÁºñËæë</span>
                                                        </div>
                                                    </template>
                                                    <div x-show="resourceQuickReplies.length === 0"
                                                        class="text-[10px] text-[var(--text-dim)] text-center py-2 italic">
                                                        Êó†Êñá‰ª∂</div>
                                                </div>
                                            </div>

                                            <!-- È¢ÑËÆæÊñá‰ª∂ÂàóË°® -->
                                            <div
                                                class="border border-[var(--border-light)] rounded-lg bg-[var(--bg-sub)]/30 flex flex-col">
                                                <div
                                                    class="p-2 border-b border-[var(--border-light)] bg-[var(--bg-sub)] rounded-t-lg">
                                                    <span
                                                        class="text-xs font-bold text-cyan-400 uppercase flex items-center gap-1">
                                                        <span>üéöÔ∏è</span> È¢ÑËÆæ (Presets)
                                                    </span>
                                                </div>
                                                <div class="p-2 space-y-1">
                                                    <template x-for="file in resourcePresets" :key="file.path">
                                                        <div class="flex items-center justify-between p-2 rounded border border-transparent hover:border-[var(--border-light)] hover:bg-[var(--bg-hover)] cursor-pointer group transition-colors"
                                                            @click="openResourcePreset(file)">
                                                            <div class="flex items-center gap-2 min-w-0">
                                                                <span class="text-cyan-400 text-sm">üéöÔ∏è</span>
                                                                <span class="text-xs text-[var(--text-main)] truncate"
                                                                    x-text="file.name"></span>
                                                            </div>
                                                            <span
                                                                class="text-[10px] text-[var(--text-dim)] opacity-0 group-hover:opacity-100">Êü•Áúã</span>
                                                        </div>
                                                    </template>
                                                    <div x-show="resourcePresets.length === 0"
                                                        class="text-[10px] text-[var(--text-dim)] text-center py-2 italic">
                                                        Êó†Êñá‰ª∂</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </section>
                    <div style="height: 1rem;"></div>
                </div>

            </section>
        </div>
    </div>
    <div x-show="showSetResourceFolderModal" x-cloak class="modal-overlay z-[1000]" style="position: absolute;"
        @click.stop>
        <div style="background: var(--bg-panel); padding: 1.5rem; border-radius: 0.75rem; width: 25rem; border: 1px solid var(--border-light);"
            @click.stop>
            <h3 style="font-weight: bold; margin-bottom: 1rem;">ËÆæÁΩÆËµÑÊ∫êÁõÆÂΩï</h3>
            <div class="flex flex-col gap-2">
                <div style="color: var(--text-dim); font-size: 0.875rem;">ËæìÂÖ•Áõ∏ÂØπË∑ØÂæÑÊàñÁªùÂØπË∑ØÂæÑ</div>
                <input type="text" x-model="editingData.resource_folder" class="form-input">
                <div class="flex gap-2">
                    <button @click="showSetResourceFolderModal = false" class="btn-secondary flex-1">ÂèñÊ∂à</button>
                    <button @click="setResourceFolder(); showSetResourceFolderModal = false;"
                        class="btn-primary flex-1 rounded">Á°ÆÂÆö (API‰øùÂ≠ò)</button>
                </div>
            </div>
        </div>
    </div>
    <!-- ================================================= -->
    <!-- Â≠óÊÆµËØ¥ÊòéÂ∏ÆÂä©Ê®°ÊÄÅÊ°Ü (Help Modal) -->
    <!-- ================================================= -->
    <div x-show="showHelpModal" x-cloak x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0 scale-95" x-transition:enter-end="opacity-100 scale-100"
        x-transition:leave="transition ease-in duration-150" x-transition:leave-start="opacity-100 scale-100"
        x-transition:leave-end="opacity-0 scale-95"
        class="fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 md:p-8"
        @click.self="showHelpModal = false">

        <div
            class="bg-[var(--bg-panel)] border border-[var(--border-light)] rounded-xl shadow-2xl w-full max-w-4xl flex flex-col overflow-hidden max-h-[90vh]">

            <!-- Header -->
            <div
                class="px-6 py-4 border-b border-[var(--border-light)] bg-[var(--bg-sub)] flex justify-between items-center flex-shrink-0">
                <h3 class="font-bold text-lg text-[var(--text-main)] flex items-center gap-2">
                    <span>üìö</span> ËßíËâ≤Âç°Â≠óÊÆµËØ¥ÊòéÊåáÂçó
                </h3>
                <button @click="showHelpModal = false" class="text-gray-500 hover:text-red-400 px-2 text-xl">‚úï</button>
            </div>

            <!-- Content -->
            <div class="p-6 overflow-y-auto custom-scrollbar text-sm text-[var(--text-main)] space-y-8">

                <!-- 1. Ê†∏ÂøÉËÆæÂÆö -->
                <div>
                    <h4 class="font-bold text-blue-400 mb-3 text-base border-b border-blue-500/30 pb-1 inline-block">1.
                        Ê†∏ÂøÉËÆæÂÆö (Core Identity)</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="p-3 border border-[var(--border-light)] rounded bg-[var(--bg-body)]">
                            <span class="font-bold text-[var(--accent-light)] block mb-1">ÁÆÄ‰ªã (Description)</span>
                            <p class="text-[var(--text-dim)] text-xs leading-relaxed">
                                ËßíËâ≤ÁöÑÊ†∏ÂøÉÂÆö‰πâ„ÄÇÂåÖÊã¨Â§ñË≤å„ÄÅÊÄßÊ†º„ÄÅË∫´‰∏ñËÉåÊôØÁ≠â„ÄÇËøôÊòØ AI ÁêÜËß£‚ÄúÊàëÊòØË∞Å‚ÄùÁöÑÊúÄ‰∏ªË¶ÅÊù•Ê∫ê„ÄÇ
                                <br><span class="opacity-60">*Âª∫ËÆÆÔºö‰ΩøÁî®Á≤æÁÇºÁöÑÈôàËø∞Âè•ÊàñÂ±ûÊÄßÂàóË°®„ÄÇ</span>
                            </p>
                        </div>
                        <div class="p-3 border border-[var(--border-light)] rounded bg-[var(--bg-body)]">
                            <span class="font-bold text-[var(--accent-light)] block mb-1">ÂºÄÂú∫ÁôΩ (First Message)</span>
                            <p class="text-[var(--text-dim)] text-xs leading-relaxed">
                                ÂØπËØùÂºÄÂßãÊó∂ AI ÂèëÈÄÅÁöÑÁ¨¨‰∏ÄÊù°Ê∂àÊÅØ„ÄÇÂÆÉÂ•†ÂÆö‰∫ÜÊï¥‰∏™ÂØπËØùÁöÑËØ≠Ë∞É„ÄÅÂú∫ÊôØÂíåÊ†ºÂºèÔºàÂ¶ÇÊòØÂê¶‰ΩøÁî®Âä®‰ΩúÊèèÂÜôÔºâ„ÄÇ
                            </p>
                        </div>
                        <div class="p-3 border border-[var(--border-light)] rounded bg-[var(--bg-body)]">
                            <span class="font-bold text-[var(--accent-light)] block mb-1">ÂØπËØùÁ§∫‰æã (Mes Examples)</span>
                            <p class="text-[var(--text-dim)] text-xs leading-relaxed">
                                <span class="bg-gray-700 text-white px-1 rounded text-[10px]">&lt;START&gt;</span>
                                Ê†áÁ≠æÂàÜÈöîÁöÑÂØπËØùÊ†∑‰æã„ÄÇ
                                ÈùûÂ∏∏ÈáçË¶ÅÔºÅÂÆÉÊïô AI Â¶Ç‰ΩïËØ¥ËØùÔºàÂè£Áôñ„ÄÅËØ≠Ê∞î„ÄÅÂä®‰ΩúÊèèÂÜôÁöÑÊ†ºÂºèÔºâ„ÄÇ
                                <br><span class="opacity-60">*Ê≥®ÊÑèÔºöËøôÈáåÁöÑËÆæÂÆö‰ªÖ‰ΩúÂèÇËÄÉÔºå‰∏ç‰ºöÁõ¥Êé•Âá∫Áé∞Âú®ÂΩìÂâçÂØπËØù‰∏≠„ÄÇ</span>
                            </p>
                        </div>
                        <div class="p-3 border border-[var(--border-light)] rounded bg-[var(--bg-body)]">
                            <span class="font-bold text-[var(--accent-light)] block mb-1">Â§áÁî®ÂºÄÂú∫ÁôΩ (Alt Greetings)</span>
                            <p class="text-[var(--text-dim)] text-xs leading-relaxed">
                                ÂèØ‰ª•Âú®ÂºÄÂßãÊñ∞ÂØπËØùÊó∂ÈöèÊú∫ÊõøÊç¢ÈªòËÆ§ÂºÄÂú∫ÁôΩÔºåÁî®‰∫éÊèê‰æõ‰∏çÂêåÁöÑÂâßÊÉÖÂàáÂÖ•ÁÇπ„ÄÇ
                            </p>
                        </div>
                    </div>
                </div>

                <!-- 2. Ê∑±Â∫¶Êâ©Â±ï -->
                <div>
                    <h4
                        class="font-bold text-purple-400 mb-3 text-base border-b border-purple-500/30 pb-1 inline-block">
                        2. Ê∑±Â∫¶Êâ©Â±ï (Extended Persona)</h4>
                    <p class="text-xs text-gray-500 mb-3">Ëøô‰∫õÂ≠óÊÆµÂú® V2/V3 ËßÑËåÉ‰∏≠Áî®‰∫éÁªÜÂàÜËÆæÂÆöÔºåSillyTavern ‰ºöÊ†πÊçÆÈÖçÁΩÆÂ∞ÜÂÆÉ‰ª¨ÁªÑÂêàÂèëÈÄÅÁªô AI„ÄÇ</p>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                        <div class="p-3 border border-[var(--border-light)] rounded bg-[var(--bg-body)]">
                            <span class="font-bold text-purple-300 block mb-1">‰∫∫Ê†ºËÆæÂÆö (Personality)</span>
                            <p class="text-[var(--text-dim)] text-xs">
                                ‰∏ìÈó®ÊèèËø∞ÊÄßÊ†ºÁâπÂæÅÔºàÂ¶ÇÔºöÂÇ≤Â®á„ÄÅÂÜ∑ÈÖ∑„ÄÅÊ∏©ÊüîÔºâ„ÄÇÊúâÊó∂‰ºö‰∏é‚ÄúÁÆÄ‰ªã‚ÄùÂêàÂπ∂ÂèëÈÄÅ„ÄÇ
                            </p>
                        </div>
                        <div class="p-3 border border-[var(--border-light)] rounded bg-[var(--bg-body)]">
                            <span class="font-bold text-purple-300 block mb-1">Âú∫ÊôØËÆæÂÆö (Scenario)</span>
                            <p class="text-[var(--text-dim)] text-xs">
                                ÂΩìÂâçÂØπËØùÂèëÁîüÁöÑËÉåÊôØÁéØÂ¢É„ÄÇ‰æãÂ¶ÇÔºö‚ÄúÂú®Êö¥È£éÈõ®ÁöÑÂ§úÊôö‚Äù„ÄÅ‚ÄúÂú®Â≠¶Ê†°ÂåªÂä°ÂÆ§‚Äù„ÄÇ
                            </p>
                        </div>
                        <div class="p-3 border border-[var(--border-light)] rounded bg-[var(--bg-body)]">
                            <span class="font-bold text-purple-300 block mb-1">‰ΩúËÄÖÊ≥®Èáä (Creator Notes)</span>
                            <p class="text-[var(--text-dim)] text-xs">
                                ‰ΩúËÄÖÁïôÁªôÁî®Êà∑ÁöÑËØ¥ÊòéÔºàÂ¶ÇÔºöÂåÖÂê´‰ªÄ‰πàXP„ÄÅÂ¶Ç‰Ωï‰ΩøÁî®Ôºâ„ÄÇÈÄöÂ∏∏‰∏ç‰ºöÂèëÈÄÅÁªô AIÔºåÈô§ÈùûÂú® ST ‰∏≠ÁâπÊÆäÈÖçÁΩÆ„ÄÇ
                            </p>
                        </div>
                    </div>
                </div>

                <!-- 3. Á≥ªÁªüÊåá‰ª§ -->
                <div>
                    <h4 class="font-bold text-red-400 mb-3 text-base border-b border-red-500/30 pb-1 inline-block">3.
                        Á≥ªÁªüÊåá‰ª§ (System & Instructions)</h4>
                    <div class="bg-[var(--bg-sub)] rounded border border-[var(--border-light)] p-3 space-y-3">
                        <div class="flex gap-3">
                            <div class="min-w-[120px] font-bold text-red-300 text-sm">Á≥ªÁªüÊèêÁ§∫ËØç<br><span
                                    class="text-[10px] opacity-60">System Prompt</span></div>
                            <div class="text-xs text-[var(--text-dim)]">
                                Âº∫Âà∂Ë¶ÜÁõñÂÖ®Â±ÄÁöÑ Main Prompt„ÄÇÁî®‰∫é‰ªéÂ∫ïÂ±ÇÊîπÂèò AI ÁöÑË°å‰∏∫ÈÄªËæëÔºàÂ¶ÇÔºö‚Äú‰Ω†ÊòØ‰∏Ä‰∏™ÊñáÂ≠óÂÜíÈô©Ê∏∏ÊàèÂºïÊìé‚ÄùÔºâ„ÄÇ
                                <br><span class="text-yellow-500">*Ë≠¶ÂëäÔºöÈô§Èùû‰Ω†Áü•ÈÅìËá™Â∑±Âú®ÂÅö‰ªÄ‰πàÔºåÂê¶ÂàôÁïôÁ©∫„ÄÇ</span>
                            </div>
                        </div>
                        <hr class="border-[var(--border-light)] border-dashed">
                        <div class="flex gap-3">
                            <div class="min-w-[120px] font-bold text-red-300 text-sm">ÂéÜÂè≤Êåá‰ª§<br><span
                                    class="text-[10px] opacity-60">Post-History</span></div>
                            <div class="text-xs text-[var(--text-dim)]">
                                Ë¢´ËøΩÂä†Âú®ËÅäÂ§©ËÆ∞ÂΩïÁöÑÊú´Â∞æÂèëÈÄÅ„ÄÇÁî±‰∫é‰ΩçÁΩÆÈù†ÂêéÔºåÊùÉÈáçÊûÅÈ´ò„ÄÇ
                                <br>Â∏∏Áî®‰∫éÔºö‚ÄúÂº∫Âà∂ÊâìÁ†¥Â§çËØª‚Äù„ÄÅ‚ÄúÂº∫Âà∂‰øùÊåÅÊüêÁßçËØ≠Ë®ÄÈ£éÊ†º‚ÄùÊàñ‚ÄúÂΩìÂâçÂâßÊÉÖÁöÑÂº∫Âà∂ÂºïÂØº‚Äù„ÄÇ
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 4. ÁÆ°ÁêÜÂô®ÁâπÊúâÂäüËÉΩ -->
                <div>
                    <h4 class="font-bold text-green-400 mb-3 text-base border-b border-green-500/30 pb-1 inline-block">
                        4. ÁÆ°ÁêÜÂô®ÁâπÊúâÂäüËÉΩ (Manager Only)</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div
                            class="p-3 border border-[var(--border-light)] rounded bg-[var(--bg-body)] relative overflow-hidden">
                            <div class="absolute right-0 top-0 p-1 opacity-10 text-4xl">üìù</div>
                            <span class="font-bold text-green-400 block mb-1">Êú¨Âú∞Â§áÊ≥® (Local Note)</span>
                            <p class="text-[var(--text-dim)] text-xs">
                                ‰ªÖÂ≠òÂÇ®Âú® ST Manager Êú¨Âú∞Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÁßÅÊúâÁ¨îËÆ∞„ÄÇ
                                <br>‚Ä¢ ÊîØÊåÅ Markdown ÂíåÂõæÁâáÁ≤òË¥¥
                                <br>‚Ä¢ ‰∏ç‰ºöÂÜôÂÖ•ËßíËâ≤Âç°Êñá‰ª∂Ôºå‰∏ç‰ºöÂèëÈÄÅÁªô AI
                                <br>‚Ä¢ ÈÄÇÂêàËÆ∞ÂΩï‰∏™‰∫∫ÊîªÁï•„ÄÅÂâßÊÉÖËøõÂ∫¶ÊàñÂæÖÂäû‰∫ãÈ°π
                            </p>
                        </div>
                        <div
                            class="p-3 border border-[var(--border-light)] rounded bg-[var(--bg-body)] relative overflow-hidden">
                            <div class="absolute right-0 top-0 p-1 opacity-10 text-4xl">üìÇ</div>
                            <span class="font-bold text-green-400 block mb-1">ËµÑÊ∫êÁõÆÂΩï (Assets)</span>
                            <p class="text-[var(--text-dim)] text-xs">
                                ÂÖ≥ËÅî‰∏Ä‰∏™Áâ©ÁêÜÊñá‰ª∂Â§πÊù•Â≠òÊîæËØ•ËßíËâ≤ÁöÑÁõ∏ÂÖ≥Êñá‰ª∂„ÄÇ
                                <br>‚Ä¢ <strong>Skins (ÁöÆËÇ§):</strong> ÊîæÂÖ•ÂõæÁâáÂç≥ÂèØÂú®ËØ¶ÊÉÖÈ°µÂ∑¶‰æßÂàáÊç¢Á´ãÁªò
                                <br>‚Ä¢ <strong>Lorebooks:</strong> ÊîæÂÖ• `lorebooks/` Â≠êÁõÆÂΩïÂèØËá™Âä®ËØÜÂà´
                            </p>
                        </div>
                    </div>
                </div>

                <!-- 5. È´òÁ∫ßÂäüËÉΩËØ¶Ëß£ -->
                <div>
                    <h4
                        class="font-bold text-orange-400 mb-3 text-base border-b border-orange-500/30 pb-1 inline-block">
                        5. È´òÁ∫ßÂäüËÉΩ (Advanced)</h4>
                    <div class="space-y-4">

                        <!-- ËµÑÊ∫êÈìæÊé•‰∏éÂåÖÊ®°Âºè -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="p-3 border border-[var(--border-light)] rounded bg-[var(--bg-body)]">
                                <span class="font-bold text-orange-300 block mb-1">üîó Êù•Ê∫êÈìæÊé• (Source Link)</span>
                                <p class="text-[var(--text-dim)] text-xs">
                                    ËÆ∞ÂΩïËßíËâ≤Âç°ÁöÑÂéüÂßãÂèëÂ∏ÉÂú∞ÂùÄÔºàÂ¶Ç Á±ªËÑë„ÄÅchubaiÔºâ„ÄÇ
                                    <br>ÁÇπÂáªÂè≥‰∏äËßíÁöÑ <span class="inline-block border border-gray-600 px-1 rounded">‚Üó
                                        ÊâìÂºÄ</span> ÂèØÂø´ÈÄüË∑≥ËΩ¨„ÄÇ
                                </p>
                            </div>
                            <div class="p-3 border border-[var(--border-light)] rounded bg-[var(--bg-body)]">
                                <span class="font-bold text-orange-300 block mb-1">üì¶ ËßíËâ≤ÂåÖÊ®°Âºè (Bundle)</span>
                                <p class="text-[var(--text-dim)] text-xs">
                                    Â∞ÜÂçïÂº†Âç°ÁâáËΩ¨Êç¢‰∏∫Êñá‰ª∂Â§πÁÆ°ÁêÜÊ®°ÂºèÔºåÊîØÊåÅÂ§öÁâàÊú¨ÊéßÂà∂„ÄÇ
                                    <br>‚Ä¢ <strong>Áî®ÈÄîÔºö</strong> ÁÆ°ÁêÜÂêå‰∏ÄËßíËâ≤ÁöÑ‰∏çÂêåÊúçË£ÖÂ∑ÆÂàÜ„ÄÅ‰∏çÂêåÁâàÊú¨ (v1/v2)„ÄÇ
                                    <br>‚Ä¢ <strong>Êìç‰ΩúÔºö</strong> Âú®"ÁÆ°ÁêÜ"È°µÁ≠æÁÇπÂáª <span class="text-yellow-500">ËΩ¨‰∏∫ÂåÖ</span>„ÄÇ
                                    <br>‚Ä¢ <strong>Â∞ÅÈù¢Ôºö</strong> ÁÇπÂáªÂ∑¶‰æßÁâàÊú¨Êù°‰∏äÁöÑ <span class="text-yellow-500">‚òÖ</span>
                                    ÂèØÂàáÊç¢ÂΩìÂâç‰∏ªÂõæÂíåÊï∞ÊçÆ„ÄÇ
                                </p>
                            </div>
                        </div>

                        <!-- Â§á‰ªΩÁ≥ªÁªü -->
                        <div class="bg-[var(--bg-sub)] rounded border border-[var(--border-light)] p-3">
                            <span class="font-bold text-orange-300 block mb-2">üõ°Ô∏è Â§á‰ªΩ‰∏éÊó∂ÂÖâÊú∫ (Backup System)</span>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-3 text-xs">
                                <div>
                                    <span class="font-bold text-[var(--text-main)]">üì∏ Âø´ÁÖß (Snapshot)</span>
                                    <p class="text-[var(--text-dim)] mt-1">
                                        ÊâãÂä®ÂàõÂª∫ÁöÑÂ§á‰ªΩÁÇπ„ÄÇÂª∫ËÆÆÂú®ËøõË°åÂ§ßÊîπÂâçÁÇπÂáªÈ°∂ÈÉ® <span
                                            class="inline-block border border-gray-600 px-1 rounded">üì∏</span> ÊåâÈíÆ„ÄÇ
                                    </p>
                                </div>
                                <div>
                                    <span class="font-bold text-[var(--text-main)]">üè∑Ô∏è ÂÖ≥ÈîÆÂø´ÁÖß (Key Snapshot)</span>
                                    <p class="text-[var(--text-dim)] mt-1">
                                        <span class="text-yellow-500">Âè≥ÈîÆÁÇπÂáª</span> Âø´ÁÖßÊåâÈíÆÂèØÂàõÂª∫Â∏¶Ê†áÁ≠æÁöÑÂ§á‰ªΩÔºàÂ¶Ç "v1.0 ÂèëÂ∏ÉÁâà"ÔºâÔºåÊñπ‰æøÈïøÊúüÂ≠òÊ°£„ÄÇ
                                    </p>
                                </div>
                                <div>
                                    <span class="font-bold text-[var(--text-main)]">‚è™ Êó∂ÂÖâÊú∫ (Rollback)</span>
                                    <p class="text-[var(--text-dim)] mt-1">
                                        ÂèØËßÜÂåñÁöÑÁâàÊú¨ÂõûÊªöÂ∑•ÂÖ∑„ÄÇÊîØÊåÅÂ∑¶Âè≥ÂàÜÊ†èÂØπÊØî‰ª£Á†ÅÂ∑ÆÂºÇ (Diff)Ôºå‰∏ÄÈîÆÊÅ¢Â§çÂà∞‰ªªÊÑèÂéÜÂè≤Êó∂Âàª„ÄÇ
                                    </p>
                                </div>
                            </div>
                            <div class="mt-2 pt-2 border-t border-[var(--border-light)] text-[10px] text-gray-500">
                                * ÊèêÁ§∫ÔºöÁ≥ªÁªü‰ºöÂú®ÁºñËæëÊó∂Ëá™Âä®Ëß¶ÂèëÊô∫ËÉΩ‰øùÂ≠ò (Smart Auto-save)Ôºå‰ªÖÂΩìÂÜÖÂÆπÂèëÁîüÂÆûË¥®ÂèòÂåñÊó∂Êâç‰ºöÁîüÊàêËá™Âä®Âø´ÁÖß„ÄÇ
                            </div>
                        </div>

                        <!-- Êõ¥Êñ∞Á≠ñÁï• -->
                        <div class="bg-[var(--bg-sub)] rounded border border-[var(--border-light)] p-3">
                            <span class="font-bold text-orange-300 block mb-2">üîÑ Êõ¥Êñ∞‰∏éÂØºÂÖ•Á≠ñÁï• (Update Logic)</span>
                            <p class="text-xs text-[var(--text-dim)] mb-2">
                                ÂΩìÊÇ®ÊãñÊãΩÊñ∞ÂõæÁâáË¶ÜÁõñÊóßÂç°ÁâáÔºåÊàñ‰ΩøÁî® URL Êõ¥Êñ∞Êó∂ÔºåÁ≥ªÁªüÊèê‰æõÂõõÁßç‰øùÊä§Á≠ñÁï•Ôºö
                            </p>
                            <ul class="grid grid-cols-1 md:grid-cols-2 gap-2 text-xs text-[var(--text-dim)]">
                                <li class="flex items-center gap-2"><span class="text-red-400">üîÑ
                                        Áõ¥Êé•Ë¶ÜÁõñ</span>ÔºöÁî®Êñ∞ÂõæÂíåÊñ∞Êï∞ÊçÆÂÆåÂÖ®ÊõøÊç¢ÊóßÂç°ÔºàÊóßÊï∞ÊçÆ‰∏¢Â§±Ôºâ„ÄÇ</li>
                                <li class="flex items-center gap-2"><span class="text-blue-400">üñºÔ∏è
                                        ‰øùÁïôÂéüÂõæ</span>Ôºö‰ªÖÊõ¥Êñ∞ÊñáÊú¨Êï∞ÊçÆÔºåÂç°ÁâáÁ´ãÁªò‰øùÊåÅ‰∏çÂèò„ÄÇ</li>
                                <li class="flex items-center gap-2"><span class="text-yellow-400">üìÇ
                                        ÂΩíÊ°£ÊóßÂõæ</span>ÔºöÊõ¥Êñ∞Âç°ÁâáÔºåÂπ∂Â∞ÜÊóßÁ´ãÁªòÁßªÂÖ•ËµÑÊ∫êÁõÆÂΩï‰øùÂ≠ò„ÄÇ</li>
                                <li class="flex items-center gap-2"><span class="text-purple-400">‚ú®
                                        Êñ∞ÂõæÂΩíÊ°£</span>Ôºö‰∏çÊîπÂèòÂΩìÂâçÂç°ÁâáÔºåÂ∞ÜÊñ∞Âõæ‰Ωú‰∏∫‚ÄúÁöÆËÇ§‚ÄùÂ≠òÂÖ•ËµÑÊ∫êÁõÆÂΩï„ÄÇ</li>
                            </ul>
                        </div>

                    </div>
                </div>

            </div>

            <!-- Footer -->
            <div class="p-4 border-t border-[var(--border-light)] bg-[var(--bg-sub)] flex justify-end">
                <button @click="showHelpModal = false" class="btn-primary px-6 py-2 rounded shadow-md font-bold">
                    ÊòéÁôΩ‰∫Ü
                </button>
            </div>
        </div>
    </div>
</div>