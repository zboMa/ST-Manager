<!-- ‰∏ñÁïå‰π¶ÈòÖËßàÂÆ§ (Reader Modal) -->
<div x-data="wiDetailPopup" x-show="showWiDetailModal" x-cloak
    class="modal-overlay z-modal-std flex items-center justify-center p-4">

    <div class="wi-reader-modal bg-[var(--bg-panel)] border border-[var(--border-light)] rounded-xl shadow-2xl
              flex flex-col w-full max-w-7xl h-[88vh] overflow-hidden relative animate-scale-in"
        @click.self="activeEntry = null">

        <!-- È°∂ÈÉ®Â∑•ÂÖ∑Ê†èÔºöÈòÖËØª‰ºòÂÖà -->
        <div
            class="wi-reader-topbar border-b border-[var(--border-light)] flex items-center gap-3 px-4 bg-[var(--bg-sub)] flex-shrink-0">
            <div class="flex items-center gap-3 min-w-0 flex-1">
                <div x-show="$store.global.deviceType !== 'mobile'" class="text-2xl select-none opacity-90">üìñ</div>
                <div class="min-w-0">
                    <div class="flex items-center overflow-hidden gap-2 min-w-0">
                        <h3 class="text-sm md:text-base font-bold leading-tight truncate" :title="activeWiDetail?.name"
                            x-text="activeWiDetail?.name || 'Êú™ÂëΩÂêç‰∏ñÁïå‰π¶'"></h3>

                        <span class="wi-badge relative top-0 right-0" :class="activeWiDetail?.type"
                            x-text="activeWiDetail?.type"></span>
                        <span x-show="activeWiDetail?.name_source === 'filename'"
                            class="wi-badge file relative top-0 right-0">FILE</span>
                    </div>

                    <div class="mt-1 flex items-center gap-3 text-[10px] text-gray-500 font-mono opacity-80">
                        <span x-show="$store.global.deviceType !== 'mobile'">üìÖ </span><span
                            x-text="formatDate(activeWiDetail?.mtime)"></span>
                        <span class="opacity-40">|</span>
                        <span>Entries: <span class="font-bold text-[var(--text-main)]"
                                x-text="wiEntries.length">0</span></span>
                        <span>Tokens: <span class="font-bold text-green-500" x-text="totalTokens">0</span></span>
                    </div>
                    <div x-show="isTruncated"
                        class="mt-1 flex items-center gap-2 text-[10px] text-yellow-400 font-mono">
                        <span>‰ªÖÈ¢ÑËßàÂâç <span class="font-bold" x-text="previewLimit"></span> / <span class="font-bold"
                                x-text="totalEntries"></span> Êù°</span>
                        <button @click="loadFullContent()"
                            class="px-2 py-0.5 rounded border border-yellow-400/40 hover:border-yellow-300/60 hover:text-yellow-300 transition">
                            Âä†ËΩΩÂÖ®ÈÉ®
                        </button>
                    </div>
                    <div x-show="isContentTruncated"
                        class="mt-1 flex items-center gap-2 text-[10px] text-yellow-400 font-mono">
                        <span>ÂÜÖÂÆπÂ∑≤Êà™Êñ≠ÔºàÊØèÊù°ÊúÄÂ§ö <span class="font-bold" x-text="previewContentLimit"></span> Â≠óÁ¨¶Ôºâ</span>
                    </div>
                    <!-- ÊêúÁ¥¢Ê°ÜÔºöÈù†Âè≥‰ΩÜ‰∏çÊä¢Ê†áÈ¢ò -->
                    <div x-show="$store.global.deviceType === 'mobile'"
                        class="wi-reader-search flex-1 max-w-md relative">
                        <span class="absolute left-3 top-1/2 -translate-y-1/2 opacity-50 text-sm">üîç</span>
                        <input type="text" x-model="searchTerm" class="w-full bg-[var(--bg-panel)] border border-[var(--border-light)] rounded-full pl-9 pr-8 py-1.5 text-sm
                              focus:border-accent-main outline-none transition-all shadow-sm"
                            placeholder="ÊêúÁ¥¢ÂÖ≥ÈîÆËØç„ÄÅÂÜÖÂÆπÊàñÂ§áÊ≥®...">
                        <button x-show="searchTerm" @click="searchTerm=''"
                            class="absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200 p-0.5 rounded-full">‚úï</button>
                    </div>
                </div>
            </div>

            <!-- ÊêúÁ¥¢Ê°ÜÔºöÈù†Âè≥‰ΩÜ‰∏çÊä¢Ê†áÈ¢ò -->
            <div x-show="$store.global.deviceType !== 'mobile'" class="wi-reader-search flex-1 max-w-md relative">
                <span class="absolute left-3 top-1/2 -translate-y-1/2 opacity-50 text-sm">üîç</span>
                <input type="text" x-model="searchTerm" class="w-full bg-[var(--bg-panel)] border border-[var(--border-light)] rounded-full pl-9 pr-8 py-1.5 text-sm
                      focus:border-accent-main outline-none transition-all shadow-sm" placeholder="ÊêúÁ¥¢ÂÖ≥ÈîÆËØç„ÄÅÂÜÖÂÆπÊàñÂ§áÊ≥®...">
                <button x-show="searchTerm" @click="searchTerm=''"
                    class="absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200 p-0.5 rounded-full">‚úï</button>
            </div>

            <!-- ÂÖ≥Èó≠ -->
            <button @click="showWiDetailModal=false"
                class="text-gray-500 hover:text-red-400 rounded-full hover:bg-[var(--bg-panel)] transition-colors"
                :class="$store.global.deviceType === 'mobile' ? '' : 'p-2'" title="ÂÖ≥Èó≠ (Esc)">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>

        <!-- ÁßªÂä®Á´ØÔºö‰æßËæπÊ†èÂàáÊç¢ÊåâÈíÆ -->
        <button x-show="$store.global.deviceType === 'mobile' && !showMobileSidebar"
            @click="showMobileSidebar = !showMobileSidebar"
            class="fixed bottom-16 left-2 z-50 w-8 h-8 bg-[var(--bg-panel)] border border-[var(--border-light)] rounded-lg flex items-center justify-center text-[var(--text-main)] shadow-lg md:hidden">
            <span x-show="!showMobileSidebar">‚ò∞</span>
            <span x-show="showMobileSidebar">‚úï</span>
        </button>

        <!-- ‰∏ª‰ΩìÔºöÂ∑¶‰ø°ÊÅØ + ‰∏≠ÈòÖËØªÊµÅ + Âè≥ËØ¶ÊÉÖÔºàÂ§ßÂ±èÂõ∫ÂÆöÔºåÂ∞èÂ±èÊäΩÂ±âÔºâ -->
        <div class="flex-1 flex overflow-hidden min-h-0">

            <!-- ÁßªÂä®Á´ØÔºö‰æßËæπÊ†èÈÅÆÁΩ© -->
            <div x-show="$store.global.deviceType === 'mobile' && showMobileSidebar" @click="showMobileSidebar = false"
                class="fixed inset-0 bg-black/50 z-30" x-transition:enter="transition ease-out duration-300"
                x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
                x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100"
                x-transition:leave-end="opacity-0"></div>

            <!-- Â∑¶‰æßÔºö‰π¶Êú¨ÂÖÉÊï∞ÊçÆ‰∏éÊìç‰ΩúÔºàÊõ¥Á¥ßÂáëÔºå‰ΩÜ‰øùÁïôÂäüËÉΩÔºâ -->
            <aside class="wi-reader-sidebar w-full md:w-[280px] flex-shrink-0 bg-[var(--bg-sub)]
                    border-r border-[var(--border-main)] flex-col min-h-0" :class="{
                    'hidden md:flex': $store.global.deviceType !== 'mobile',
                    'fixed top-14 left-0 bottom-0 z-40 w-[280px] max-w-[85vw] shadow-2xl flex': $store.global.deviceType === 'mobile' && showMobileSidebar,
                    'hidden': $store.global.deviceType === 'mobile' && !showMobileSidebar
                }" x-transition:enter="transition ease-out duration-300"
                x-transition:enter-start="transform -translate-x-full" x-transition:enter-end="transform translate-x-0"
                x-transition:leave="transition ease-in duration-200" x-transition:leave-start="transform translate-x-0"
                x-transition:leave-end="transform -translate-x-full">
                <div class="p-4 border-b border-[var(--border-light)] space-y-3">
                    <template x-if="description">
                        <div>
                            <div class="text-[10px] uppercase font-bold text-gray-500 mb-1">Description</div>
                            <div class="text-xs text-[var(--text-sub)] italic bg-[var(--bg-body)] p-2 rounded border border-[var(--border-light)]
                        max-h-28 overflow-y-auto custom-scrollbar">
                                <span x-text="description"></span>
                            </div>
                        </div>
                    </template>

                    <details class="group" x-show="activeWiDetail?.path">
                        <summary class="cursor-pointer select-none text-[10px] uppercase font-bold text-gray-500">
                            Path <span class="opacity-60 group-open:hidden">‚ñ∂</span><span
                                class="opacity-60 hidden group-open:inline">‚ñº</span>
                        </summary>
                        <div class="mt-1 text-[10px] text-gray-500 font-mono break-all leading-tight opacity-70"
                            x-text="activeWiDetail?.path"></div>
                    </details>

                    <!-- Âø´ÈÄüÁ≠õÈÄâ -->
                    <div class="wi-reader-filters">
                        <div class="text-[10px] uppercase font-bold text-gray-500 mb-2">Quick Filters</div>

                        <div class="grid grid-cols-3 gap-1.5">
                            <button class="wi-filter-chip" @click="uiFilter = (uiFilter==='enabled' ? null : 'enabled')"
                                :class="uiFilter==='enabled' && 'active'">
                                Enabled
                            </button>
                            <button class="wi-filter-chip"
                                @click="uiFilter = (uiFilter==='disabled' ? null : 'disabled')"
                                :class="uiFilter==='disabled' && 'active'">
                                Disabled
                            </button>
                            <button class="wi-filter-chip" @click="uiFilter = null" :class="!uiFilter && 'active'">
                                All
                            </button>

                            <button class="wi-filter-chip"
                                @click="uiStrategy = (uiStrategy==='constant' ? null : 'constant')"
                                :class="uiStrategy==='constant' && 'active'">
                                Const
                            </button>
                            <button class="wi-filter-chip"
                                @click="uiStrategy = (uiStrategy==='vector' ? null : 'vector')"
                                :class="uiStrategy==='vector' && 'active'">
                                Vector
                            </button>
                            <button class="wi-filter-chip"
                                @click="uiStrategy = (uiStrategy==='normal' ? null : 'normal')"
                                :class="uiStrategy==='normal' && 'active'">
                                Normal
                            </button>
                        </div>

                        <button class="wi-filter-chip mt-2 w-full" x-show="uiFilter || uiStrategy"
                            @click="uiFilter=null; uiStrategy=null">
                            Clear Filters
                        </button>
                    </div>
                </div>

                <!-- ‰∏≠ÈÉ®ÔºöÁõÆÂΩïÔºàTOCÔºâ -->
                <div class="flex-1 min-h-0 overflow-y-auto custom-scrollbar p-3">
                    <div class="flex items-center justify-between mb-2">
                        <div class="text-[10px] uppercase font-bold text-gray-500">Contents</div>
                        <div class="text-[10px] text-gray-500 font-mono">
                            <span x-text="uiFilteredEntries.length"></span>/<span x-text="wiEntries.length"></span>
                        </div>
                    </div>

                    <div class="space-y-1">
                        <template x-for="(entry, idx) in uiFilteredEntries" :key="entry.id || idx">
                            <button class="wi-toc-item w-full text-left" :class="activeEntry===entry && 'active'"
                                @click="selectEntry(entry, true)">

                                <span class="wi-toc-dot"
                                    :data-status="entry.constant ? 'constant' : (entry.vectorized ? 'vector' : (entry.enabled ? 'normal' : 'disabled'))"></span>

                                <span class="truncate font-bold"
                                    x-text="entry.comment || formatWiKeys(entry.keys) || ('Entry #' + entry.insertion_order)"></span>

                                <span class="wi-toc-order font-mono">#<span
                                        x-text="entry.insertion_order"></span></span>
                            </button>
                        </template>

                        <div x-show="!isLoading && uiFilteredEntries.length === 0"
                            class="text-center py-8 text-[var(--text-dim)] text-xs">
                            Êó†ÂåπÈÖçÊù°ÁõÆ
                        </div>
                    </div>
                </div>

                <div class="p-3 border-t border-[var(--border-light)] mt-auto space-y-2 bg-[var(--bg-sub)]">
                    <button @click="enterWiEditorFromDetail()" class="w-full btn-primary py-2.5 rounded-lg flex items-center justify-center gap-2 font-bold shadow-md
                         transform transition hover:translate-y-[-1px]">
                        <span>‚úèÔ∏è</span> ËøõÂÖ•ÂÖ®Â±èÁºñËæëÂô®
                    </button>

                    <div class="grid grid-cols-3 gap-1.5">
                        <button @click="createSnapshot('lorebook')"
                            class="btn-secondary py-1.5 text-xs flex flex-col items-center justify-center gap-0.5"
                            title="Âø´ÈÄüÂ§á‰ªΩ">
                            <span class="text-base">üì∏</span><span class="scale-90">Âø´ÁÖß</span>
                        </button>
                        <button @click="openRollback()"
                            class="btn-secondary py-1.5 text-xs flex flex-col items-center justify-center gap-0.5"
                            title="Êü•ÁúãÂéÜÂè≤ÁâàÊú¨">
                            <span class="text-base">‚è™</span><span class="scale-90">ÂõûÊªö</span>
                        </button>
                        <button @click="openBackupFolder('lorebook')"
                            class="btn-secondary py-1.5 text-xs flex flex-col items-center justify-center gap-0.5"
                            title="ÊâìÂºÄÂ§á‰ªΩÊñá‰ª∂Â§π">
                            <span class="text-base">üìÇ</span><span class="scale-90">ÁõÆÂΩï</span>
                        </button>
                    </div>

                    <template x-if="activeWiDetail?.type !== 'embedded'">
                        <button @click="deleteCurrentWi()" class="w-full py-1 text-[10px] text-red-400 hover:text-red-500 hover:bg-red-500/10 rounded transition-colors
                           flex items-center justify-center gap-1">
                            üóëÔ∏è Âà†Èô§Ê≠§Êñá‰ª∂
                        </button>
                    </template>
                </div>
            </aside>

            <!-- ‰∏≠Èó¥ÔºöÈòÖËØªÊµÅÔºàÁ∫µÂêëÂç°ÁâáÔºåÊõ¥ÈÄÇÂêàËØª contentÔºâ -->
            <main class="wi-reader-main flex-1 min-w-0 bg-[var(--bg-body)] relative overflow-hidden">
                <div class="absolute inset-0 overflow-y-auto custom-scrollbar">
                    <!-- È°∂ÈÉ®ÊèêÁ§∫Êù°ÔºàÊêúÁ¥¢ÂëΩ‰∏≠/ÊÄªÊï∞Ôºâ -->
                    <div
                        class="sticky top-0 z-10 bg-[var(--bg-body)]/80 backdrop-blur border-b border-[var(--border-light)] px-4 py-2">
                        <div class="text-[11px] text-gray-500 flex items-center justify-between">
                            <div>
                                <span class="font-mono">Results:</span>
                                <span class="font-bold text-[var(--text-main)]"
                                    x-text="uiFilteredEntries.length"></span>
                                <span class="opacity-60">/</span>
                                <span x-text="wiEntries.length"></span>
                            </div>
                            <div class="opacity-70 hidden sm:block">
                                ÂçïÂáªÊü•ÁúãËØ¶ÊÉÖÔºõÂèåÂáªË∑≥ËΩ¨ÁºñËæëÂô®
                            </div>
                        </div>
                    </div>

                    <div x-show="isLoading"
                        class="h-full flex flex-col items-center justify-center text-gray-500 gap-4">
                        <div class="text-4xl animate-bounce">‚è≥</div>
                        <p class="text-sm">Ê≠£Âú®ËØªÂèñÂç∑ÂÆó...</p>
                    </div>

                    <div x-show="!isLoading" class="p-4 space-y-3">
                        <template x-for="(entry, idx) in uiFilteredEntries" :key="entry.id || idx">
                            <article :id="'wi-reader-entry-' + (entry.id || (entry.insertion_order ?? 'x') + '-' + idx)"
                                class="wi-reader-entry group"
                                :class="{'active': activeEntry === entry,'toc-flash': highlightEntryKey && (highlightEntryKey === (entry.id || (entry.insertion_order ?? 'x') + '-' + idx))}"
                                :data-status="entry.constant ? 'constant' : (entry.vectorized ? 'vector' : (entry.enabled ? 'normal' : 'disabled'))"
                                @click="selectEntry(entry, true)" @dblclick="enterWiEditorFromDetail(entry)">

                                <div class="wi-reader-entry-status"></div>

                                <div class="wi-reader-entry-body">
                                    <!-- È°∂ÈÉ®Ë°åÔºökeys + #order + tokens -->
                                    <div class="flex items-start justify-between gap-3">
                                        <div class="min-w-0">
                                            <div class="wi-reader-keys font-mono"
                                                x-text="formatWiKeys(entry.keys) || '(Êó†Ëß¶ÂèëËØç)'"></div>
                                            <div class="wi-reader-title text-[11px] mt-1"
                                                :class="entry.comment ? 'text-[var(--text-sub)]' : 'text-gray-400 italic'"
                                                x-text="entry.comment || 'Untitled'"></div>
                                        </div>

                                        <div class="flex items-center gap-2 flex-shrink-0">
                                            <span class="wi-pill" :class="entry.enabled ? 'on' : 'off'"
                                                x-text="entry.enabled ? 'EN' : 'OFF'"></span>
                                            <span class="wi-pill mono">#<span
                                                    x-text="entry.insertion_order"></span></span>
                                            <span class="wi-pill mono"><span
                                                    x-text="estimateTokens(entry.content)"></span>T</span>
                                        </div>
                                    </div>

                                    <!-- ÂÜÖÂÆπÈ¢ÑËßàÔºöÊõ¥Èïø„ÄÅÊõ¥ÈÄÇÂêàÈòÖËØª -->
                                    <div class="wi-reader-content break-words whitespace-pre-wrap mt-2"
                                        x-text="entry.content || '(Êó†ÂÜÖÂÆπ)'"></div>

                                    <!-- Â∫ïÈÉ®ÔºöÁ≠ñÁï•‰ø°ÊÅØÔºà‰∏çÂà†Â≠óÊÆµÔºåÂè™Êõ¥ÊòìÊâ´Ôºâ -->
                                    <div class="wi-reader-meta">
                                        <span class="wi-meta-item">Pos: <span x-text="entry.position"></span></span>
                                        <span class="wi-meta-dot">‚Ä¢</span>
                                        <span class="wi-meta-item">
                                            <span
                                                x-text="entry.constant ? 'Constant' : (entry.vectorized ? 'Vector' : 'Normal')"></span>
                                        </span>
                                        <span class="wi-meta-dot">‚Ä¢</span>
                                        <span class="wi-meta-item">Selective: <span
                                                x-text="entry.selective ? 'Yes' : 'No'"></span></span>
                                    </div>
                                </div>
                            </article>
                        </template>

                        <div x-show="uiFilteredEntries.length === 0"
                            class="flex flex-col items-center justify-center py-20 opacity-50">
                            <div class="text-4xl grayscale mb-2">üçÉ</div>
                            <p class="text-sm">Ê≤°ÊúâÊâæÂà∞Áõ∏ÂÖ≥Êù°ÁõÆ</p>
                        </div>
                    </div>
                </div>
            </main>

            <!-- ÁßªÂä®Á´ØÔºöËØ¶ÊÉÖÈù¢ÊùøÈÅÆÁΩ© -->
            <div x-show="$store.global.deviceType === 'mobile' && activeEntry" @click="activeEntry = null"
                class="fixed inset-0 bg-black/50 z-40" x-transition:enter="transition ease-out duration-300"
                x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
                x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100"
                x-transition:leave-end="opacity-0"></div>

            <!-- Âè≥‰æßÔºöÊù°ÁõÆËØ¶ÊÉÖÔºàÂ§ßÂ±èÂõ∫ÂÆöÔºõÂ∞èÂ±èÊäΩÂ±â overlayÔºâ -->
            <aside class="wi-reader-detail" x-show="activeEntry"
                x-transition:enter="transition ease-out duration-300 transform"
                x-transition:enter-start="translate-x-full" x-transition:enter-end="translate-x-0"
                x-transition:leave="transition ease-in duration-200 transform" x-transition:leave-start="translate-x-0"
                x-transition:leave-end="translate-x-full">

                <div
                    class="h-10 border-b border-[var(--border-light)] flex items-center justify-between px-3 bg-[var(--bg-sub)] flex-shrink-0">
                    <span class="text-xs font-bold text-gray-500 uppercase tracking-wider">Entry Details</span>
                    <button @click="activeEntry = null"
                        class="text-gray-500 hover:text-[var(--text-main)] px-2">‚úï</button>
                </div>

                <div class="flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar">
                    <template x-if="activeEntry">
                        <div class="space-y-4">
                            <div class="flex items-start justify-between gap-3">
                                <h4 class="font-bold text-lg text-[var(--text-main)] break-all"
                                    x-text="activeEntry.comment || 'Êú™ÂëΩÂêçÊù°ÁõÆ'"></h4>
                                <div class="flex flex-col gap-1 items-end">
                                    <div class="px-2 py-0.5 rounded text-[10px] font-bold border uppercase"
                                        :class="activeEntry.enabled ? 'bg-green-500/10 border-green-500/30 text-green-500' : 'bg-gray-500/10 border-gray-500/30 text-gray-500'">
                                        <span x-text="activeEntry.enabled ? 'Enabled' : 'Disabled'"></span>
                                    </div>
                                    <div class="px-2 py-0.5 rounded text-[10px] font-bold border uppercase"
                                        :class="activeEntry.constant ? 'bg-blue-500/10 border-blue-500/30 text-blue-400' : (activeEntry.vectorized ? 'bg-purple-500/10 border-purple-500/30 text-purple-400' : 'bg-green-500/10 border-green-500/30 text-green-500')">
                                        <span
                                            x-text="activeEntry.constant ? 'Constant' : (activeEntry.vectorized ? 'Vector' : 'Normal')"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="space-y-2">
                                <div>
                                    <label class="text-[10px] text-gray-500 uppercase font-bold block mb-1">Primary
                                        Keys</label>
                                    <div
                                        class="p-2 bg-[var(--bg-body)] border border-[var(--border-light)] rounded text-xs font-mono text-yellow-500 break-words select-text">
                                        <span x-text="formatWiKeys(activeEntry.keys)"></span>
                                    </div>
                                </div>
                                <template x-if="activeEntry.secondary_keys && activeEntry.secondary_keys.length > 0">
                                    <div>
                                        <label
                                            class="text-[10px] text-gray-500 uppercase font-bold block mb-1">Secondary
                                            Keys</label>
                                        <div
                                            class="p-2 bg-[var(--bg-body)] border border-[var(--border-light)] rounded text-xs font-mono text-teal-500 break-words select-text">
                                            <span x-text="formatWiKeys(activeEntry.secondary_keys)"></span>
                                        </div>
                                    </div>
                                </template>
                            </div>

                            <div>
                                <div class="flex justify-between items-center mb-1">
                                    <label class="text-[10px] text-gray-500 uppercase font-bold">Content</label>
                                    <span class="text-[10px] text-gray-400 font-mono"
                                        x-text="estimateTokens(activeEntry.content) + ' Tokens'"></span>
                                </div>
                                <div class="p-3 bg-[var(--bg-body)] border border-[var(--border-light)] rounded text-sm text-[var(--text-main)]
                            whitespace-pre-wrap break-words font-sans leading-relaxed select-text min-h-[120px] border-l-4"
                                    :class="{'border-l-blue-500': activeEntry.constant, 'border-l-green-500': !activeEntry.constant}">
                                    <span x-text="activeEntry.content"></span>
                                </div>
                            </div>

                            <div class="grid grid-cols-2 gap-2 text-xs">
                                <div class="p-2 border border-[var(--border-light)] rounded bg-[var(--bg-body)]">
                                    <div class="text-[9px] text-gray-500 uppercase">Order</div>
                                    <div class="font-mono font-bold" x-text="activeEntry.insertion_order"></div>
                                </div>
                                <div class="p-2 border border-[var(--border-light)] rounded bg-[var(--bg-body)]">
                                    <div class="text-[9px] text-gray-500 uppercase">Position</div>
                                    <div class="font-mono font-bold" x-text="activeEntry.position"></div>
                                </div>
                                <div class="p-2 border border-[var(--border-light)] rounded bg-[var(--bg-body)]">
                                    <div class="text-[9px] text-gray-500 uppercase">Strategy</div>
                                    <div class="font-bold"
                                        x-text="activeEntry.constant ? 'Constant' : (activeEntry.vectorized ? 'Vector' : 'Normal')">
                                    </div>
                                </div>
                                <div class="p-2 border border-[var(--border-light)] rounded bg-[var(--bg-body)]">
                                    <div class="text-[9px] text-gray-500 uppercase">Selective</div>
                                    <div class="font-bold" x-text="activeEntry.selective ? 'Yes' : 'No'"></div>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>

                <div class="p-3 border-t border-[var(--border-light)] bg-[var(--bg-sub)]">
                    <button @click="enterWiEditorFromDetail(activeEntry)"
                        class="w-full btn-secondary py-2 text-xs flex items-center justify-center gap-2 font-bold hover:bg-accent-main hover:text-white transition-colors">
                        <span>üõ†Ô∏è</span> ÂéªÁºñËæëÂô®‰øÆÊîπÊ≠§Êù°ÁõÆ
                    </button>
                </div>
            </aside>

        </div>
    </div>
</div>